<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report-3.0.xsd" version="3.0" name="org.apache.nifi.properties.ConfigEncryptionToolTest" time="9.943" tests="112" errors="0" skipped="0" failures="0">
  <properties>
    <property name="sun.desktop" value="gnome"/>
    <property name="awt.toolkit" value="sun.awt.X11.XToolkit"/>
    <property name="file.encoding.pkg" value="sun.io"/>
    <property name="java.specification.version" value="1.8"/>
    <property name="sun.cpu.isalist" value=""/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="java.class.path" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/test-classes:/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-flow-encryptor/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-property-encryptor/target/classes:/home/alex/.m2/repository/commons-codec/commons-codec/1.14/commons-codec-1.14.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-properties/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-property-utils/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-properties/target/classes:/home/alex/.m2/repository/org/apache/commons/commons-lang3/3.5/commons-lang3-3.5.jar:/home/alex/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.69/bcprov-jdk15on-1.69.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-sensitive-property-provider/target/classes:/home/alex/.m2/repository/software/amazon/awssdk/kms/2.17.1/kms-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/aws-json-protocol/2.17.1/aws-json-protocol-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/third-party-jackson-core/2.17.1/third-party-jackson-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/json-utils/2.17.1/json-utils-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/protocol-core/2.17.1/protocol-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/sdk-core/2.17.1/sdk-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/profiles/2.17.1/profiles-2.17.1.jar:/home/alex/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar:/home/alex/.m2/repository/software/amazon/awssdk/auth/2.17.1/auth-2.17.1.jar:/home/alex/.m2/repository/software/amazon/eventstream/eventstream/1.0.1/eventstream-1.0.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/http-client-spi/2.17.1/http-client-spi-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/regions/2.17.1/regions-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/annotations/2.17.1/annotations-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/utils/2.17.1/utils-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/aws-core/2.17.1/aws-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/metrics-spi/2.17.1/metrics-spi-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/secretsmanager/2.17.1/secretsmanager-2.17.1.jar:/home/alex/.m2/repository/com/azure/azure-security-keyvault-secrets/4.3.3/azure-security-keyvault-secrets-4.3.3.jar:/home/alex/.m2/repository/com/azure/azure-core/1.20.0/azure-core-1.20.0.jar:/home/alex/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.12.4/jackson-datatype-jsr310-2.12.4.jar:/home/alex/.m2/repository/com/fasterxml/jackson/dataformat/jackson-dataformat-xml/2.12.4/jackson-dataformat-xml-2.12.4.jar:/home/alex/.m2/repository/io/projectreactor/reactor-core/3.4.9/reactor-core-3.4.9.jar:/home/alex/.m2/repository/com/azure/azure-security-keyvault-keys/4.3.3/azure-security-keyvault-keys-4.3.3.jar:/home/alex/.m2/repository/com/azure/azure-identity/1.3.4/azure-identity-1.3.4.jar:/home/alex/.m2/repository/com/microsoft/azure/msal4j/1.10.1/msal4j-1.10.1.jar:/home/alex/.m2/repository/com/nimbusds/oauth2-oidc-sdk/9.7/oauth2-oidc-sdk-9.7.jar:/home/alex/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/home/alex/.m2/repository/com/nimbusds/content-type/2.1/content-type-2.1.jar:/home/alex/.m2/repository/com/nimbusds/lang-tag/1.5/lang-tag-1.5.jar:/home/alex/.m2/repository/com/nimbusds/nimbus-jose-jwt/9.9.3/nimbus-jose-jwt-9.9.3.jar:/home/alex/.m2/repository/com/microsoft/azure/msal4j-persistence-extension/1.1.0/msal4j-persistence-extension-1.1.0.jar:/home/alex/.m2/repository/net/java/dev/jna/jna/5.5.0/jna-5.5.0.jar:/home/alex/.m2/repository/net/java/dev/jna/jna-platform/5.6.0/jna-platform-5.6.0.jar:/home/alex/.m2/repository/net/minidev/json-smart/2.4.7/json-smart-2.4.7.jar:/home/alex/.m2/repository/net/minidev/accessors-smart/2.4.7/accessors-smart-2.4.7.jar:/home/alex/.m2/repository/org/ow2/asm/asm/9.1/asm-9.1.jar:/home/alex/.m2/repository/com/azure/azure-core-http-okhttp/1.7.1/azure-core-http-okhttp-1.7.1.jar:/home/alex/.m2/repository/com/squareup/okhttp3/okhttp/4.8.1/okhttp-4.8.1.jar:/home/alex/.m2/repository/com/squareup/okio/okio/2.7.0/okio-2.7.0.jar:/home/alex/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.3.70/kotlin-stdlib-common-1.3.70.jar:/home/alex/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.72/kotlin-stdlib-1.3.72.jar:/home/alex/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/alex/.m2/repository/software/amazon/awssdk/url-connection-client/2.17.1/url-connection-client-2.17.1.jar:/home/alex/.m2/repository/com/google/cloud/google-cloud-kms/2.0.2/google-cloud-kms-2.0.2.jar:/home/alex/.m2/repository/io/grpc/grpc-api/1.40.0/grpc-api-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-context/1.40.0/grpc-context-1.40.0.jar:/home/alex/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/home/alex/.m2/repository/io/grpc/grpc-stub/1.40.0/grpc-stub-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-protobuf/1.40.0/grpc-protobuf-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-protobuf-lite/1.40.0/grpc-protobuf-lite-1.40.0.jar:/home/alex/.m2/repository/com/google/api/api-common/2.0.1/api-common-2.0.1.jar:/home/alex/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/home/alex/.m2/repository/com/google/auto/value/auto-value-annotations/1.8.2/auto-value-annotations-1.8.2.jar:/home/alex/.m2/repository/com/google/protobuf/protobuf-java/3.17.3/protobuf-java-3.17.3.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-common-protos/2.3.2/proto-google-common-protos-2.3.2.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-cloud-kms-v1/0.91.2/proto-google-cloud-kms-v1-0.91.2.jar:/home/alex/.m2/repository/com/google/guava/guava/30.1.1-jre/guava-30.1.1-jre.jar:/home/alex/.m2/repository/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/home/alex/.m2/repository/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/alex/.m2/repository/com/google/j2objc/j2objc-annotations/1.3/j2objc-annotations-1.3.jar:/home/alex/.m2/repository/com/google/api/gax/2.3.0/gax-2.3.0.jar:/home/alex/.m2/repository/io/opencensus/opencensus-api/0.28.0/opencensus-api-0.28.0.jar:/home/alex/.m2/repository/com/google/api/gax-grpc/2.3.0/gax-grpc-2.3.0.jar:/home/alex/.m2/repository/com/google/auth/google-auth-library-credentials/1.1.0/google-auth-library-credentials-1.1.0.jar:/home/alex/.m2/repository/io/grpc/grpc-netty-shaded/1.40.0/grpc-netty-shaded-1.40.0.jar:/home/alex/.m2/repository/io/perfmark/perfmark-api/0.23.0/perfmark-api-0.23.0.jar:/home/alex/.m2/repository/io/grpc/grpc-core/1.40.0/grpc-core-1.40.0.jar:/home/alex/.m2/repository/com/google/android/annotations/4.1.1.4/annotations-4.1.1.4.jar:/home/alex/.m2/repository/org/codehaus/mojo/animal-sniffer-annotations/1.20/animal-sniffer-annotations-1.20.jar:/home/alex/.m2/repository/io/grpc/grpc-alts/1.40.0/grpc-alts-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-grpclb/1.40.0/grpc-grpclb-1.40.0.jar:/home/alex/.m2/repository/com/google/protobuf/protobuf-java-util/3.17.3/protobuf-java-util-3.17.3.jar:/home/alex/.m2/repository/org/conscrypt/conscrypt-openjdk-uber/2.5.1/conscrypt-openjdk-uber-2.5.1.jar:/home/alex/.m2/repository/org/threeten/threetenbp/1.5.1/threetenbp-1.5.1.jar:/home/alex/.m2/repository/io/grpc/grpc-auth/1.40.0/grpc-auth-1.40.0.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-iam-v1/1.0.14/proto-google-iam-v1-1.0.14.jar:/home/alex/.m2/repository/com/google/auth/google-auth-library-oauth2-http/1.1.0/google-auth-library-oauth2-http-1.1.0.jar:/home/alex/.m2/repository/com/google/http-client/google-http-client/1.39.2/google-http-client-1.39.2.jar:/home/alex/.m2/repository/io/opencensus/opencensus-contrib-http-util/0.28.0/opencensus-contrib-http-util-0.28.0.jar:/home/alex/.m2/repository/com/google/http-client/google-http-client-gson/1.39.2/google-http-client-gson-1.39.2.jar:/home/alex/.m2/repository/com/google/code/gson/gson/2.8.8/gson-2.8.8.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-vault-utils/target/classes:/home/alex/.m2/repository/org/springframework/vault/spring-vault-core/2.3.2/spring-vault-core-2.3.2.jar:/home/alex/.m2/repository/org/springframework/spring-web/5.3.11/spring-web-5.3.11.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-properties-loader/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-utils/target/classes:/home/alex/Repositories/nifi/nifi-api/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-utils-api/target/classes:/home/alex/.m2/repository/at/favre/lib/bcrypt/0.9.0/bcrypt-0.9.0.jar:/home/alex/.m2/repository/at/favre/lib/bytes/1.3.0/bytes-1.3.0.jar:/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-tls/target/classes:/home/alex/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.69/bcpkix-jdk15on-1.69.jar:/home/alex/.m2/repository/org/bouncycastle/bcutil-jdk15on/1.69/bcutil-jdk15on-1.69.jar:/home/alex/.m2/repository/commons-io/commons-io/2.10.0/commons-io-2.10.0.jar:/home/alex/.m2/repository/org/glassfish/jersey/core/jersey-client/2.33/jersey-client-2.33.jar:/home/alex/.m2/repository/jakarta/ws/rs/jakarta.ws.rs-api/2.1.6/jakarta.ws.rs-api-2.1.6.jar:/home/alex/.m2/repository/org/glassfish/jersey/core/jersey-common/2.33/jersey-common-2.33.jar:/home/alex/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/home/alex/.m2/repository/org/glassfish/hk2/osgi-resource-locator/1.0.3/osgi-resource-locator-1.0.3.jar:/home/alex/.m2/repository/org/glassfish/hk2/external/jakarta.inject/2.6.1/jakarta.inject-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/jersey/inject/jersey-hk2/2.33/jersey-hk2-2.33.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-locator/2.6.1/hk2-locator-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/external/aopalliance-repackaged/2.6.1/aopalliance-repackaged-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-api/2.6.1/hk2-api-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-utils/2.6.1/hk2-utils-2.6.1.jar:/home/alex/.m2/repository/org/javassist/javassist/3.25.0-GA/javassist-3.25.0-GA.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.12.3/jackson-databind-2.12.3.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.12.3/jackson-annotations-2.12.3.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpclient/4.5.5/httpclient-4.5.5.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpcore/4.4.9/httpcore-4.4.9.jar:/home/alex/.m2/repository/commons-cli/commons-cli/1.4/commons-cli-1.4.jar:/home/alex/.m2/repository/com/github/stefanbirkner/system-rules/1.19.0/system-rules-1.19.0.jar:/home/alex/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-core/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-core-api/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-nar-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-parameter/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-components/target/classes:/home/alex/Repositories/nifi/nifi-framework-api/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-web-utils/target/classes:/home/alex/.m2/repository/org/quartz-scheduler/quartz/2.3.2/quartz-2.3.2.jar:/home/alex/.m2/repository/com/mchange/c3p0/0.9.5.4/c3p0-0.9.5.4.jar:/home/alex/.m2/repository/com/mchange/mchange-commons-java/0.2.15/mchange-commons-java-0.2.15.jar:/home/alex/.m2/repository/com/zaxxer/HikariCP-java7/2.4.13/HikariCP-java7-2.4.13.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-expression-language/target/classes:/home/alex/.m2/repository/org/antlr/antlr-runtime/3.5.2/antlr-runtime-3.5.2.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-uuid5/target/classes:/home/alex/.m2/repository/com/jayway/jsonpath/json-path/2.6.0/json-path-2.6.0.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-schema-utils/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-repository-models/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-kms/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-repository-encryption/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-site-to-site/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster-protocol/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-socket-utils/target/classes:/home/alex/.m2/repository/commons-net/commons-net/3.6/commons-net-3.6.jar:/home/alex/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.12.3/jackson-module-jaxb-annotations-2.12.3.jar:/home/alex/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.2/jakarta.xml.bind-api-2.3.2.jar:/home/alex/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.1/jakarta.activation-api-1.2.1.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-logging-utils/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-client-dto/target/classes:/home/alex/.m2/repository/io/swagger/swagger-annotations/1.6.0/swagger-annotations-1.6.0.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-site-to-site-client/target/classes:/home/alex/.m2/repository/org/apache/httpcomponents/httpasyncclient/4.1.4/httpasyncclient-4.1.4.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpcore-nio/4.4.10/httpcore-nio-4.4.10.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-authorization/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-administration/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-user-actions/target/classes:/home/alex/.m2/repository/org/springframework/spring-aop/5.3.11/spring-aop-5.3.11.jar:/home/alex/.m2/repository/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar:/home/alex/.m2/repository/org/springframework/security/spring-security-core/5.5.2/spring-security-core-5.5.2.jar:/home/alex/.m2/repository/org/springframework/security/spring-security-crypto/5.5.2/spring-security-crypto-5.5.2.jar:/home/alex/.m2/repository/org/apache/commons/commons-collections4/4.4/commons-collections4-4.4.jar:/home/alex/.m2/repository/com/h2database/h2/1.4.199/h2-1.4.199.jar:/home/alex/.m2/repository/org/springframework/spring-core/5.3.11/spring-core-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-jcl/5.3.11/spring-jcl-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-beans/5.3.11/spring-beans-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-context/5.3.11/spring-context-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-expression/5.3.11/spring-expression-5.3.11.jar:/home/alex/.m2/repository/org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar:/home/alex/.m2/repository/org/questdb/core/4.2.1/core-4.2.1.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-data-provenance-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-write-ahead-log/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-rocksdb-utils/target/classes:/home/alex/.m2/repository/org/rocksdb/rocksdbjni/6.6.4/rocksdbjni-6.6.4.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-flowfile-repo-serialization/target/classes:/home/alex/.m2/repository/org/apache/zookeeper/zookeeper/3.5.9/zookeeper-3.5.9.jar:/home/alex/.m2/repository/org/apache/zookeeper/zookeeper-jute/3.5.9/zookeeper-jute-3.5.9.jar:/home/alex/.m2/repository/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/home/alex/.m2/repository/io/netty/netty-handler/4.1.50.Final/netty-handler-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-common/4.1.50.Final/netty-common-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-resolver/4.1.50.Final/netty-resolver-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-buffer/4.1.50.Final/netty-buffer-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport/4.1.50.Final/netty-transport-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-codec/4.1.50.Final/netty-codec-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport-native-epoll/4.1.50.Final/netty-transport-native-epoll-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.50.Final/netty-transport-native-unix-common-4.1.50.Final.jar:/home/alex/.m2/repository/org/apache/curator/curator-framework/5.2.0/curator-framework-5.2.0.jar:/home/alex/.m2/repository/org/apache/curator/curator-client/5.2.0/curator-client-5.2.0.jar:/home/alex/.m2/repository/org/apache/curator/curator-recipes/5.2.0/curator-recipes-5.2.0.jar:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-data-model/target/classes:/home/alex/.m2/repository/javax/validation/validation-api/2.0.1.Final/validation-api-2.0.1.Final.jar:/home/alex/.m2/repository/javax/ws/rs/javax.ws.rs-api/2.1/javax.ws.rs-api-2.1.jar:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-revision/nifi-registry-revision-entity-model/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-flow-diff/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-client/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-security-utils/target/classes:/home/alex/.m2/repository/org/glassfish/jersey/media/jersey-media-json-jackson/2.33/jersey-media-json-jackson-2.33.jar:/home/alex/.m2/repository/org/glassfish/jersey/ext/jersey-entity-filtering/2.33/jersey-entity-filtering-2.33.jar:/home/alex/.m2/repository/org/glassfish/jersey/media/jersey-media-multipart/2.33/jersey-media-multipart-2.33.jar:/home/alex/.m2/repository/org/jvnet/mimepull/mimepull/1.9.13/mimepull-1.9.13.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.12.3/jackson-core-2.12.3.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-authorizer/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-authorization-providers/target/classes:/home/alex/.m2/repository/com/github/ben-manes/caffeine/caffeine/2.8.1/caffeine-2.8.1.jar:/home/alex/.m2/repository/org/checkerframework/checker-qual/3.1.0/checker-qual-3.1.0.jar:/home/alex/.m2/repository/com/google/errorprone/error_prone_annotations/2.3.4/error_prone_annotations-2.3.4.jar:/home/alex/.m2/repository/org/apache/commons/commons-configuration2/2.7/commons-configuration2-2.7.jar:/home/alex/.m2/repository/org/apache/commons/commons-text/1.8/commons-text-1.8.jar:/home/alex/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/alex/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/home/alex/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/home/alex/.m2/repository/org/spockframework/spock-core/1.3-groovy-2.5/spock-core-1.3-groovy-2.5.jar:/home/alex/.m2/repository/cglib/cglib-nodep/2.2.2/cglib-nodep-2.2.2.jar:/home/alex/.m2/repository/org/xmlunit/xmlunit-core/2.6.3/xmlunit-core-2.6.3.jar:/home/alex/.m2/repository/org/xmlunit/xmlunit-matchers/2.6.3/xmlunit-matchers-2.6.3.jar:/home/alex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy/2.5.14/groovy-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-ant/2.5.14/groovy-ant-2.5.14.jar:/home/alex/.m2/repository/org/apache/ant/ant/1.9.15/ant-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-junit/1.9.15/ant-junit-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-launcher/1.9.15/ant-launcher-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-antlr/1.9.15/ant-antlr-1.9.15.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-cli-commons/2.5.14/groovy-cli-commons-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-cli-picocli/2.5.14/groovy-cli-picocli-2.5.14.jar:/home/alex/.m2/repository/info/picocli/picocli/4.3.2/picocli-4.3.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-console/2.5.14/groovy-console-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-datetime/2.5.14/groovy-datetime-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-docgenerator/2.5.14/groovy-docgenerator-2.5.14.jar:/home/alex/.m2/repository/com/thoughtworks/qdox/qdox/1.12.1/qdox-1.12.1.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-groovydoc/2.5.14/groovy-groovydoc-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-groovysh/2.5.14/groovy-groovysh-2.5.14.jar:/home/alex/.m2/repository/jline/jline/2.14.6/jline-2.14.6.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-jmx/2.5.14/groovy-jmx-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-json/2.5.14/groovy-json-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-jsr223/2.5.14/groovy-jsr223-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-macro/2.5.14/groovy-macro-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-nio/2.5.14/groovy-nio-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-servlet/2.5.14/groovy-servlet-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-sql/2.5.14/groovy-sql-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-swing/2.5.14/groovy-swing-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-templates/2.5.14/groovy-templates-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-test-junit5/2.5.14/groovy-test-junit5-2.5.14.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-launcher/1.7.2/junit-platform-launcher-1.7.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-testng/2.5.14/groovy-testng-2.5.14.jar:/home/alex/.m2/repository/org/testng/testng/6.13.1/testng-6.13.1.jar:/home/alex/.m2/repository/com/beust/jcommander/1.72/jcommander-1.72.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-xml/2.5.14/groovy-xml-2.5.14.jar:/home/alex/.m2/repository/org/slf4j/slf4j-simple/1.7.32/slf4j-simple-1.7.32.jar:/home/alex/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.7.2/junit-jupiter-api-5.7.2.jar:/home/alex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/alex/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-commons/1.7.2/junit-platform-commons-1.7.2.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.7.2/junit-jupiter-engine-5.7.2.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-engine/1.7.2/junit-platform-engine-1.7.2.jar:/home/alex/.m2/repository/org/junit/vintage/junit-vintage-engine/5.7.2/junit-vintage-engine-5.7.2.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.7.2/junit-jupiter-params-5.7.2.jar:/home/alex/.m2/repository/org/mockito/mockito-core/3.11.2/mockito-core-3.11.2.jar:/home/alex/.m2/repository/net/bytebuddy/byte-buddy/1.11.3/byte-buddy-1.11.3.jar:/home/alex/.m2/repository/net/bytebuddy/byte-buddy-agent/1.11.3/byte-buddy-agent-1.11.3.jar:/home/alex/.m2/repository/org/objenesis/objenesis/3.2/objenesis-3.2.jar:/home/alex/.m2/repository/org/mockito/mockito-junit-jupiter/3.11.2/mockito-junit-jupiter-3.11.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-test/2.5.14/groovy-test-2.5.14.jar:"/>
    <property name="java.vm.vendor" value="Private Build"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="java.vendor.url" value="http://java.oracle.com/"/>
    <property name="user.timezone" value="Europe/Lisbon"/>
    <property name="java.vm.specification.version" value="1.8"/>
    <property name="os.name" value="Linux"/>
    <property name="user.country" value="US"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.boot.library.path" value="/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64"/>
    <property name="sun.java.command" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/surefire/surefirebooter6559488392942640176.jar /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/surefire 2024-05-02T02-13-54_999-jvmRun1 surefire8418575302972460940tmp surefire_1906835185902372494136tmp"/>
    <property name="surefire.test.class.path" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/test-classes:/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-flow-encryptor/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-property-encryptor/target/classes:/home/alex/.m2/repository/commons-codec/commons-codec/1.14/commons-codec-1.14.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-properties/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-property-utils/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-properties/target/classes:/home/alex/.m2/repository/org/apache/commons/commons-lang3/3.5/commons-lang3-3.5.jar:/home/alex/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.69/bcprov-jdk15on-1.69.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-sensitive-property-provider/target/classes:/home/alex/.m2/repository/software/amazon/awssdk/kms/2.17.1/kms-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/aws-json-protocol/2.17.1/aws-json-protocol-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/third-party-jackson-core/2.17.1/third-party-jackson-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/json-utils/2.17.1/json-utils-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/protocol-core/2.17.1/protocol-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/sdk-core/2.17.1/sdk-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/profiles/2.17.1/profiles-2.17.1.jar:/home/alex/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar:/home/alex/.m2/repository/software/amazon/awssdk/auth/2.17.1/auth-2.17.1.jar:/home/alex/.m2/repository/software/amazon/eventstream/eventstream/1.0.1/eventstream-1.0.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/http-client-spi/2.17.1/http-client-spi-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/regions/2.17.1/regions-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/annotations/2.17.1/annotations-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/utils/2.17.1/utils-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/aws-core/2.17.1/aws-core-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/metrics-spi/2.17.1/metrics-spi-2.17.1.jar:/home/alex/.m2/repository/software/amazon/awssdk/secretsmanager/2.17.1/secretsmanager-2.17.1.jar:/home/alex/.m2/repository/com/azure/azure-security-keyvault-secrets/4.3.3/azure-security-keyvault-secrets-4.3.3.jar:/home/alex/.m2/repository/com/azure/azure-core/1.20.0/azure-core-1.20.0.jar:/home/alex/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.12.4/jackson-datatype-jsr310-2.12.4.jar:/home/alex/.m2/repository/com/fasterxml/jackson/dataformat/jackson-dataformat-xml/2.12.4/jackson-dataformat-xml-2.12.4.jar:/home/alex/.m2/repository/io/projectreactor/reactor-core/3.4.9/reactor-core-3.4.9.jar:/home/alex/.m2/repository/com/azure/azure-security-keyvault-keys/4.3.3/azure-security-keyvault-keys-4.3.3.jar:/home/alex/.m2/repository/com/azure/azure-identity/1.3.4/azure-identity-1.3.4.jar:/home/alex/.m2/repository/com/microsoft/azure/msal4j/1.10.1/msal4j-1.10.1.jar:/home/alex/.m2/repository/com/nimbusds/oauth2-oidc-sdk/9.7/oauth2-oidc-sdk-9.7.jar:/home/alex/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/home/alex/.m2/repository/com/nimbusds/content-type/2.1/content-type-2.1.jar:/home/alex/.m2/repository/com/nimbusds/lang-tag/1.5/lang-tag-1.5.jar:/home/alex/.m2/repository/com/nimbusds/nimbus-jose-jwt/9.9.3/nimbus-jose-jwt-9.9.3.jar:/home/alex/.m2/repository/com/microsoft/azure/msal4j-persistence-extension/1.1.0/msal4j-persistence-extension-1.1.0.jar:/home/alex/.m2/repository/net/java/dev/jna/jna/5.5.0/jna-5.5.0.jar:/home/alex/.m2/repository/net/java/dev/jna/jna-platform/5.6.0/jna-platform-5.6.0.jar:/home/alex/.m2/repository/net/minidev/json-smart/2.4.7/json-smart-2.4.7.jar:/home/alex/.m2/repository/net/minidev/accessors-smart/2.4.7/accessors-smart-2.4.7.jar:/home/alex/.m2/repository/org/ow2/asm/asm/9.1/asm-9.1.jar:/home/alex/.m2/repository/com/azure/azure-core-http-okhttp/1.7.1/azure-core-http-okhttp-1.7.1.jar:/home/alex/.m2/repository/com/squareup/okhttp3/okhttp/4.8.1/okhttp-4.8.1.jar:/home/alex/.m2/repository/com/squareup/okio/okio/2.7.0/okio-2.7.0.jar:/home/alex/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.3.70/kotlin-stdlib-common-1.3.70.jar:/home/alex/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.72/kotlin-stdlib-1.3.72.jar:/home/alex/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/alex/.m2/repository/software/amazon/awssdk/url-connection-client/2.17.1/url-connection-client-2.17.1.jar:/home/alex/.m2/repository/com/google/cloud/google-cloud-kms/2.0.2/google-cloud-kms-2.0.2.jar:/home/alex/.m2/repository/io/grpc/grpc-api/1.40.0/grpc-api-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-context/1.40.0/grpc-context-1.40.0.jar:/home/alex/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/home/alex/.m2/repository/io/grpc/grpc-stub/1.40.0/grpc-stub-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-protobuf/1.40.0/grpc-protobuf-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-protobuf-lite/1.40.0/grpc-protobuf-lite-1.40.0.jar:/home/alex/.m2/repository/com/google/api/api-common/2.0.1/api-common-2.0.1.jar:/home/alex/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/home/alex/.m2/repository/com/google/auto/value/auto-value-annotations/1.8.2/auto-value-annotations-1.8.2.jar:/home/alex/.m2/repository/com/google/protobuf/protobuf-java/3.17.3/protobuf-java-3.17.3.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-common-protos/2.3.2/proto-google-common-protos-2.3.2.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-cloud-kms-v1/0.91.2/proto-google-cloud-kms-v1-0.91.2.jar:/home/alex/.m2/repository/com/google/guava/guava/30.1.1-jre/guava-30.1.1-jre.jar:/home/alex/.m2/repository/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/home/alex/.m2/repository/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/alex/.m2/repository/com/google/j2objc/j2objc-annotations/1.3/j2objc-annotations-1.3.jar:/home/alex/.m2/repository/com/google/api/gax/2.3.0/gax-2.3.0.jar:/home/alex/.m2/repository/io/opencensus/opencensus-api/0.28.0/opencensus-api-0.28.0.jar:/home/alex/.m2/repository/com/google/api/gax-grpc/2.3.0/gax-grpc-2.3.0.jar:/home/alex/.m2/repository/com/google/auth/google-auth-library-credentials/1.1.0/google-auth-library-credentials-1.1.0.jar:/home/alex/.m2/repository/io/grpc/grpc-netty-shaded/1.40.0/grpc-netty-shaded-1.40.0.jar:/home/alex/.m2/repository/io/perfmark/perfmark-api/0.23.0/perfmark-api-0.23.0.jar:/home/alex/.m2/repository/io/grpc/grpc-core/1.40.0/grpc-core-1.40.0.jar:/home/alex/.m2/repository/com/google/android/annotations/4.1.1.4/annotations-4.1.1.4.jar:/home/alex/.m2/repository/org/codehaus/mojo/animal-sniffer-annotations/1.20/animal-sniffer-annotations-1.20.jar:/home/alex/.m2/repository/io/grpc/grpc-alts/1.40.0/grpc-alts-1.40.0.jar:/home/alex/.m2/repository/io/grpc/grpc-grpclb/1.40.0/grpc-grpclb-1.40.0.jar:/home/alex/.m2/repository/com/google/protobuf/protobuf-java-util/3.17.3/protobuf-java-util-3.17.3.jar:/home/alex/.m2/repository/org/conscrypt/conscrypt-openjdk-uber/2.5.1/conscrypt-openjdk-uber-2.5.1.jar:/home/alex/.m2/repository/org/threeten/threetenbp/1.5.1/threetenbp-1.5.1.jar:/home/alex/.m2/repository/io/grpc/grpc-auth/1.40.0/grpc-auth-1.40.0.jar:/home/alex/.m2/repository/com/google/api/grpc/proto-google-iam-v1/1.0.14/proto-google-iam-v1-1.0.14.jar:/home/alex/.m2/repository/com/google/auth/google-auth-library-oauth2-http/1.1.0/google-auth-library-oauth2-http-1.1.0.jar:/home/alex/.m2/repository/com/google/http-client/google-http-client/1.39.2/google-http-client-1.39.2.jar:/home/alex/.m2/repository/io/opencensus/opencensus-contrib-http-util/0.28.0/opencensus-contrib-http-util-0.28.0.jar:/home/alex/.m2/repository/com/google/http-client/google-http-client-gson/1.39.2/google-http-client-gson-1.39.2.jar:/home/alex/.m2/repository/com/google/code/gson/gson/2.8.8/gson-2.8.8.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-vault-utils/target/classes:/home/alex/.m2/repository/org/springframework/vault/spring-vault-core/2.3.2/spring-vault-core-2.3.2.jar:/home/alex/.m2/repository/org/springframework/spring-web/5.3.11/spring-web-5.3.11.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-properties-loader/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-utils/target/classes:/home/alex/Repositories/nifi/nifi-api/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-utils-api/target/classes:/home/alex/.m2/repository/at/favre/lib/bcrypt/0.9.0/bcrypt-0.9.0.jar:/home/alex/.m2/repository/at/favre/lib/bytes/1.3.0/bytes-1.3.0.jar:/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-tls/target/classes:/home/alex/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.69/bcpkix-jdk15on-1.69.jar:/home/alex/.m2/repository/org/bouncycastle/bcutil-jdk15on/1.69/bcutil-jdk15on-1.69.jar:/home/alex/.m2/repository/commons-io/commons-io/2.10.0/commons-io-2.10.0.jar:/home/alex/.m2/repository/org/glassfish/jersey/core/jersey-client/2.33/jersey-client-2.33.jar:/home/alex/.m2/repository/jakarta/ws/rs/jakarta.ws.rs-api/2.1.6/jakarta.ws.rs-api-2.1.6.jar:/home/alex/.m2/repository/org/glassfish/jersey/core/jersey-common/2.33/jersey-common-2.33.jar:/home/alex/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/home/alex/.m2/repository/org/glassfish/hk2/osgi-resource-locator/1.0.3/osgi-resource-locator-1.0.3.jar:/home/alex/.m2/repository/org/glassfish/hk2/external/jakarta.inject/2.6.1/jakarta.inject-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/jersey/inject/jersey-hk2/2.33/jersey-hk2-2.33.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-locator/2.6.1/hk2-locator-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/external/aopalliance-repackaged/2.6.1/aopalliance-repackaged-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-api/2.6.1/hk2-api-2.6.1.jar:/home/alex/.m2/repository/org/glassfish/hk2/hk2-utils/2.6.1/hk2-utils-2.6.1.jar:/home/alex/.m2/repository/org/javassist/javassist/3.25.0-GA/javassist-3.25.0-GA.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.12.3/jackson-databind-2.12.3.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.12.3/jackson-annotations-2.12.3.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpclient/4.5.5/httpclient-4.5.5.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpcore/4.4.9/httpcore-4.4.9.jar:/home/alex/.m2/repository/commons-cli/commons-cli/1.4/commons-cli-1.4.jar:/home/alex/.m2/repository/com/github/stefanbirkner/system-rules/1.19.0/system-rules-1.19.0.jar:/home/alex/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-core/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-core-api/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-nar-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-parameter/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-components/target/classes:/home/alex/Repositories/nifi/nifi-framework-api/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-web-utils/target/classes:/home/alex/.m2/repository/org/quartz-scheduler/quartz/2.3.2/quartz-2.3.2.jar:/home/alex/.m2/repository/com/mchange/c3p0/0.9.5.4/c3p0-0.9.5.4.jar:/home/alex/.m2/repository/com/mchange/mchange-commons-java/0.2.15/mchange-commons-java-0.2.15.jar:/home/alex/.m2/repository/com/zaxxer/HikariCP-java7/2.4.13/HikariCP-java7-2.4.13.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-expression-language/target/classes:/home/alex/.m2/repository/org/antlr/antlr-runtime/3.5.2/antlr-runtime-3.5.2.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-uuid5/target/classes:/home/alex/.m2/repository/com/jayway/jsonpath/json-path/2.6.0/json-path-2.6.0.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-schema-utils/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-repository-models/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-security-kms/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-repository-encryption/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-site-to-site/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster-protocol/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-socket-utils/target/classes:/home/alex/.m2/repository/commons-net/commons-net/3.6/commons-net-3.6.jar:/home/alex/.m2/repository/com/fasterxml/jackson/module/jackson-module-jaxb-annotations/2.12.3/jackson-module-jaxb-annotations-2.12.3.jar:/home/alex/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.2/jakarta.xml.bind-api-2.3.2.jar:/home/alex/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.1/jakarta.activation-api-1.2.1.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-logging-utils/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-client-dto/target/classes:/home/alex/.m2/repository/io/swagger/swagger-annotations/1.6.0/swagger-annotations-1.6.0.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-site-to-site-client/target/classes:/home/alex/.m2/repository/org/apache/httpcomponents/httpasyncclient/4.1.4/httpasyncclient-4.1.4.jar:/home/alex/.m2/repository/org/apache/httpcomponents/httpcore-nio/4.4.10/httpcore-nio-4.4.10.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-authorization/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-administration/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-user-actions/target/classes:/home/alex/.m2/repository/org/springframework/spring-aop/5.3.11/spring-aop-5.3.11.jar:/home/alex/.m2/repository/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar:/home/alex/.m2/repository/org/springframework/security/spring-security-core/5.5.2/spring-security-core-5.5.2.jar:/home/alex/.m2/repository/org/springframework/security/spring-security-crypto/5.5.2/spring-security-crypto-5.5.2.jar:/home/alex/.m2/repository/org/apache/commons/commons-collections4/4.4/commons-collections4-4.4.jar:/home/alex/.m2/repository/com/h2database/h2/1.4.199/h2-1.4.199.jar:/home/alex/.m2/repository/org/springframework/spring-core/5.3.11/spring-core-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-jcl/5.3.11/spring-jcl-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-beans/5.3.11/spring-beans-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-context/5.3.11/spring-context-5.3.11.jar:/home/alex/.m2/repository/org/springframework/spring-expression/5.3.11/spring-expression-5.3.11.jar:/home/alex/.m2/repository/org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar:/home/alex/.m2/repository/org/questdb/core/4.2.1/core-4.2.1.jar:/home/alex/Repositories/nifi/nifi-commons/nifi-data-provenance-utils/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-write-ahead-log/target/classes:/home/alex/Repositories/nifi/nifi-commons/nifi-rocksdb-utils/target/classes:/home/alex/.m2/repository/org/rocksdb/rocksdbjni/6.6.4/rocksdbjni-6.6.4.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-flowfile-repo-serialization/target/classes:/home/alex/.m2/repository/org/apache/zookeeper/zookeeper/3.5.9/zookeeper-3.5.9.jar:/home/alex/.m2/repository/org/apache/zookeeper/zookeeper-jute/3.5.9/zookeeper-jute-3.5.9.jar:/home/alex/.m2/repository/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/home/alex/.m2/repository/io/netty/netty-handler/4.1.50.Final/netty-handler-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-common/4.1.50.Final/netty-common-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-resolver/4.1.50.Final/netty-resolver-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-buffer/4.1.50.Final/netty-buffer-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport/4.1.50.Final/netty-transport-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-codec/4.1.50.Final/netty-codec-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport-native-epoll/4.1.50.Final/netty-transport-native-epoll-4.1.50.Final.jar:/home/alex/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.50.Final/netty-transport-native-unix-common-4.1.50.Final.jar:/home/alex/.m2/repository/org/apache/curator/curator-framework/5.2.0/curator-framework-5.2.0.jar:/home/alex/.m2/repository/org/apache/curator/curator-client/5.2.0/curator-client-5.2.0.jar:/home/alex/.m2/repository/org/apache/curator/curator-recipes/5.2.0/curator-recipes-5.2.0.jar:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-data-model/target/classes:/home/alex/.m2/repository/javax/validation/validation-api/2.0.1.Final/validation-api-2.0.1.Final.jar:/home/alex/.m2/repository/javax/ws/rs/javax.ws.rs-api/2.1/javax.ws.rs-api-2.1.jar:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-revision/nifi-registry-revision-entity-model/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-flow-diff/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-client/target/classes:/home/alex/Repositories/nifi/nifi-registry/nifi-registry-core/nifi-registry-security-utils/target/classes:/home/alex/.m2/repository/org/glassfish/jersey/media/jersey-media-json-jackson/2.33/jersey-media-json-jackson-2.33.jar:/home/alex/.m2/repository/org/glassfish/jersey/ext/jersey-entity-filtering/2.33/jersey-entity-filtering-2.33.jar:/home/alex/.m2/repository/org/glassfish/jersey/media/jersey-media-multipart/2.33/jersey-media-multipart-2.33.jar:/home/alex/.m2/repository/org/jvnet/mimepull/mimepull/1.9.13/mimepull-1.9.13.jar:/home/alex/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.12.3/jackson-core-2.12.3.jar:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-authorizer/target/classes:/home/alex/Repositories/nifi/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-authorization-providers/target/classes:/home/alex/.m2/repository/com/github/ben-manes/caffeine/caffeine/2.8.1/caffeine-2.8.1.jar:/home/alex/.m2/repository/org/checkerframework/checker-qual/3.1.0/checker-qual-3.1.0.jar:/home/alex/.m2/repository/com/google/errorprone/error_prone_annotations/2.3.4/error_prone_annotations-2.3.4.jar:/home/alex/.m2/repository/org/apache/commons/commons-configuration2/2.7/commons-configuration2-2.7.jar:/home/alex/.m2/repository/org/apache/commons/commons-text/1.8/commons-text-1.8.jar:/home/alex/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/alex/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/home/alex/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/home/alex/.m2/repository/org/spockframework/spock-core/1.3-groovy-2.5/spock-core-1.3-groovy-2.5.jar:/home/alex/.m2/repository/cglib/cglib-nodep/2.2.2/cglib-nodep-2.2.2.jar:/home/alex/.m2/repository/org/xmlunit/xmlunit-core/2.6.3/xmlunit-core-2.6.3.jar:/home/alex/.m2/repository/org/xmlunit/xmlunit-matchers/2.6.3/xmlunit-matchers-2.6.3.jar:/home/alex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy/2.5.14/groovy-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-ant/2.5.14/groovy-ant-2.5.14.jar:/home/alex/.m2/repository/org/apache/ant/ant/1.9.15/ant-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-junit/1.9.15/ant-junit-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-launcher/1.9.15/ant-launcher-1.9.15.jar:/home/alex/.m2/repository/org/apache/ant/ant-antlr/1.9.15/ant-antlr-1.9.15.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-cli-commons/2.5.14/groovy-cli-commons-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-cli-picocli/2.5.14/groovy-cli-picocli-2.5.14.jar:/home/alex/.m2/repository/info/picocli/picocli/4.3.2/picocli-4.3.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-console/2.5.14/groovy-console-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-datetime/2.5.14/groovy-datetime-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-docgenerator/2.5.14/groovy-docgenerator-2.5.14.jar:/home/alex/.m2/repository/com/thoughtworks/qdox/qdox/1.12.1/qdox-1.12.1.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-groovydoc/2.5.14/groovy-groovydoc-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-groovysh/2.5.14/groovy-groovysh-2.5.14.jar:/home/alex/.m2/repository/jline/jline/2.14.6/jline-2.14.6.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-jmx/2.5.14/groovy-jmx-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-json/2.5.14/groovy-json-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-jsr223/2.5.14/groovy-jsr223-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-macro/2.5.14/groovy-macro-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-nio/2.5.14/groovy-nio-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-servlet/2.5.14/groovy-servlet-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-sql/2.5.14/groovy-sql-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-swing/2.5.14/groovy-swing-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-templates/2.5.14/groovy-templates-2.5.14.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-test-junit5/2.5.14/groovy-test-junit5-2.5.14.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-launcher/1.7.2/junit-platform-launcher-1.7.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-testng/2.5.14/groovy-testng-2.5.14.jar:/home/alex/.m2/repository/org/testng/testng/6.13.1/testng-6.13.1.jar:/home/alex/.m2/repository/com/beust/jcommander/1.72/jcommander-1.72.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-xml/2.5.14/groovy-xml-2.5.14.jar:/home/alex/.m2/repository/org/slf4j/slf4j-simple/1.7.32/slf4j-simple-1.7.32.jar:/home/alex/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.7.2/junit-jupiter-api-5.7.2.jar:/home/alex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/alex/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-commons/1.7.2/junit-platform-commons-1.7.2.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.7.2/junit-jupiter-engine-5.7.2.jar:/home/alex/.m2/repository/org/junit/platform/junit-platform-engine/1.7.2/junit-platform-engine-1.7.2.jar:/home/alex/.m2/repository/org/junit/vintage/junit-vintage-engine/5.7.2/junit-vintage-engine-5.7.2.jar:/home/alex/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.7.2/junit-jupiter-params-5.7.2.jar:/home/alex/.m2/repository/org/mockito/mockito-core/3.11.2/mockito-core-3.11.2.jar:/home/alex/.m2/repository/net/bytebuddy/byte-buddy/1.11.3/byte-buddy-1.11.3.jar:/home/alex/.m2/repository/net/bytebuddy/byte-buddy-agent/1.11.3/byte-buddy-agent-1.11.3.jar:/home/alex/.m2/repository/org/objenesis/objenesis/3.2/objenesis-3.2.jar:/home/alex/.m2/repository/org/mockito/mockito-junit-jupiter/3.11.2/mockito-junit-jupiter-3.11.2.jar:/home/alex/.m2/repository/org/codehaus/groovy/groovy-test/2.5.14/groovy-test-2.5.14.jar:"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="/home/alex"/>
    <property name="user.language" value="en"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.home" value="/usr/lib/jvm/java-8-openjdk-amd64/jre"/>
    <property name="basedir" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config"/>
    <property name="file.separator" value="/"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="java.awt.graphicsenv" value="sun.awt.X11GraphicsEnvironment"/>
    <property name="java.awt.headless" value="true"/>
    <property name="surefire.real.class.path" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/surefire/surefirebooter6559488392942640176.jar"/>
    <property name="sun.boot.class.path" value="/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/jfr.jar:/usr/lib/jvm/java-8-openjdk-amd64/jre/classes"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="1.8.0_402-8u402-ga-2ubuntu1~22.04-b06"/>
    <property name="java.net.preferIPv4Stack" value="true"/>
    <property name="user.name" value="alex"/>
    <property name="path.separator" value=":"/>
    <property name="os.version" value="6.5.0-28-generic"/>
    <property name="java.endorsed.dirs" value="/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/endorsed"/>
    <property name="java.runtime.name" value="OpenJDK Runtime Environment"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.vm.name" value="OpenJDK 64-Bit Server VM"/>
    <property name="localRepository" value="/home/alex/.m2/repository"/>
    <property name="java.vendor.url.bug" value="http://bugreport.sun.com/bugreport/"/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="java.version" value="1.8.0_402"/>
    <property name="user.dir" value="/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config"/>
    <property name="os.arch" value="amd64"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="java.awt.printerjob" value="sun.print.PSPrinterJob"/>
    <property name="sun.os.patch.level" value="unknown"/>
    <property name="java.library.path" value="/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib"/>
    <property name="java.vm.info" value="mixed mode"/>
    <property name="java.vendor" value="Private Build"/>
    <property name="java.vm.version" value="25.402-b06"/>
    <property name="java.specification.maintenance.version" value="5"/>
    <property name="java.ext.dirs" value="/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext:/usr/java/packages/lib/ext"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="java.class.version" value="52.0"/>
  </properties>
  <testcase name="testShouldPerformFullOperationOnFlowXmlWithSameSensitivePropsKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.45">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:, nifi.security.keystorePasswd:, nifi.security.truststorePasswd:, nifi.sensitive.props.key:, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=
nifi.sensitive.props.key.protected=
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=
nifi.security.keystoreType=
nifi.security.keystorePasswd=
nifi.security.keyPasswd=
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 83 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}, enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{bbc765db156ecf1ef69905da47cf43a197f042c299eb1ef72d2144da0c61d07b5c97592bd1aa3cf55964120de273a27e}, enc{542bbf5977d47f782b69107f213f283dfeb97174d3a928ce138adeefc35399bda4c9ed215c5dd00f8d17b4157826adfa}]
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFromPasswordToPassword" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="1.359">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key derived from password [thisIsABadPassword]: 	2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migration key derived from password [drowssaPdaBAsIsiht]: 	7696EBC090B471D068F17CF1E6FA10CD9CBC7300B1F88171E3D597C0472C9747
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Running [password to password] with args: [-n, src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties, -b, target/tmp/tmp_bootstrap.conf, -o, target/tmp/tmp_nifi.properties, -m, -v, -w, thisIsABadPassword, -p, drowssaPdaBAsIsiht]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating key (password to password) with -n src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties -b target/tmp/tmp_bootstrap.conf -o target/tmp/tmp_nifi.properties -m -v -w thisIsABadPassword -p drowssaPdaBAsIsiht
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	ecxNRtmIfQIFLH5U||tLANtodw7qB8AI1tH35y3TfTSXrRJV/Do6LOKB0pt8l79DrcHw
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	PtP9KQJkDi3ynJE4||PvZCPS+08qL8pMkvp5cdulckQRACTtkCpkPCO2RAT5XeBpN3RQXlWRIn
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	sr2rEf6zWR7y+Rsb||wVLf8cmlJCHFpvT9LcZ0PRMnmdFF8zw1Zx/rEppKxSUvTAWVBPjtdCGeCK7QrQ
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=sr2rEf6zWR7y+Rsb||wVLf8cmlJCHFpvT9LcZ0PRMnmdFF8zw1Zx/rEppKxSUvTAWVBPjtdCGeCK7QrQ
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=PtP9KQJkDi3ynJE4||PvZCPS+08qL8pMkvp5cdulckQRACTtkCpkPCO2RAT5XeBpN3RQXlWRIn
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=ecxNRtmIfQIFLH5U||tLANtodw7qB8AI1tH35y3TfTSXrRJV/Do6LOKB0pt8l79DrcHw
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=7696EBC090B471D068F17CF1E6FA10CD9CBC7300B1F88171E3D597C0472C9747
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationForLoginIdentityProviders" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.396">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: src/test/resources/login-identity-providers-populated.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: target/tmp/tmp-lip.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded login identity providers content (105 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Zwn9YlFRfy767Byb||qJQLIEJJmX5Mu8cFprMkuvyM6o2ThEHtFp0MHmSRFErzsg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">0IWcyDiJwvKVo0bq||s3LS15ie6feL63CeCGlyAw4Rv8As1C2qSlyTghCUx/cPgA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">zwNaNPltihkd5aIi||RUBLhpp44xdvXUqZX05dmwWMpUni8EJs2erCsNVD+GDtsA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">Zwn9YlFRfy767Byb||qJQLIEJJmX5Mu8cFprMkuvyM6o2ThEHtFp0MHmSRFErzsg</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">0IWcyDiJwvKVo0bq||s3LS15ie6feL63CeCGlyAw4Rv8As1C2qSlyTghCUx/cPgA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">zwNaNPltihkd5aIi||RUBLhpp44xdvXUqZX05dmwWMpUni8EJs2erCsNVD+GDtsA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldTranslateCliWithPlaintextInputWithoutBootstrapConf" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.123">
    <system-out><![CDATA[baseUrl=https://nifi.nifi.apache.org:8443
keystore=/path/to/keystore.jks
keystoreType=JKS
keystorePasswd=thisIsABadKeystorePassword
keyPasswd=thisIsABadKeyPassword
truststore=
truststoreType=
truststorePasswd=
proxiedEntity=
Tried to exit with status 0.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi_with_sensitive_properties_unprotected.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No root key detected in null -- if src/test/resources/nifi_with_sensitive_properties_unprotected.properties is encrypted, the translation will fail
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - STDOUT:
	baseUrl=https://nifi.nifi.apache.org:8443
	keystore=/path/to/keystore.jks
	keystoreType=JKS
	keystorePasswd=thisIsABadKeystorePassword
	keyPasswd=thisIsABadKeyPassword
	truststore=
	truststoreType=
	truststorePasswd=
	proxiedEntity=
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptLoginIdentityProvidersWithMultipleElementsPerLine" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.05">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property><property name="TLS - Keystore"></property><property name="TLS - Keystore Password" encryption="">thisIsABadPassword</property><property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">n63ZSGdI2aMCoiA4||YeDJ57snAvYpcJgP5ClAE6OtUsLA0d4TILeq10iEgNmMPg</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="aes/gcm/256">4T/ELqzeZnCbtNdd||sPz+uyYuk5JoXoY1QviAfjQnKR1VtcrZfvMzagiHGN5OAA</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">zlS5BNkrsBoXqRec||LQfixXVFx777a9MdfLojmeLSGAYJRb94s1Q3of1omm9Zkg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">n63ZSGdI2aMCoiA4||YeDJ57snAvYpcJgP5ClAE6OtUsLA0d4TILeq10iEgNmMPg</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="aes/gcm/256">4T/ELqzeZnCbtNdd||sPz+uyYuk5JoXoY1QviAfjQnKR1VtcrZfvMzagiHGN5OAA</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">zlS5BNkrsBoXqRec||LQfixXVFx777a9MdfLojmeLSGAYJRb94s1Q3of1omm9Zkg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: n63ZSGdI2aMCoiA4||YeDJ57snAvYpcJgP5ClAE6OtUsLA0d4TILeq10iEgNmMPg
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 4T/ELqzeZnCbtNdd||sPz+uyYuk5JoXoY1QviAfjQnKR1VtcrZfvMzagiHGN5OAA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: zlS5BNkrsBoXqRec||LQfixXVFx777a9MdfLojmeLSGAYJRb94s1Q3of1omm9Zkg
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptLoginIdentityProviders" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.041">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">OEBzNBCob/g3fZCo||GFLVPyEo3g5E1LsK4KYNrE/kWhcjH/aOlSEPZkO/FYR9YA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">2dPmq1SILZ4ySa/+||X+6rM4FTkc4ral3oCOFH0d89j+EOsTf+Dpu+/8kGHHGzgA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">+OFrQKpzF8H82qZk||AxTESuxVZgWlSQUhyj8TY4hCMOpccXaBj7KY1Ac9j0k0Tg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">OEBzNBCob/g3fZCo||GFLVPyEo3g5E1LsK4KYNrE/kWhcjH/aOlSEPZkO/FYR9YA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">2dPmq1SILZ4ySa/+||X+6rM4FTkc4ral3oCOFH0d89j+EOsTf+Dpu+/8kGHHGzgA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">+OFrQKpzF8H82qZk||AxTESuxVZgWlSQUhyj8TY4hCMOpccXaBj7KY1Ac9j0k0Tg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: OEBzNBCob/g3fZCo||GFLVPyEo3g5E1LsK4KYNrE/kWhcjH/aOlSEPZkO/FYR9YA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 2dPmq1SILZ4ySa/+||X+6rM4FTkc4ral3oCOFH0d89j+EOsTf+Dpu+/8kGHHGzgA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: +OFrQKpzF8H82qZk||AxTESuxVZgWlSQUhyj8TY4hCMOpccXaBj7KY1Ac9j0k0Tg
]]></system-err>
  </testcase>
  <testcase name="testShouldReadPasswordFromConsole" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.016">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read password: [0123 4567]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read password: [   thisIsABadPassword   ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read password: [non-hex-chars]
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperation" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.046">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	S3R9e0Wy5iKjy2r4||UoI/R2lTajcFjEZgJiKg0D4xMcTQe/md/SpKNji7flb2UYJM3Q
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	5yc8lDJko6TKw7HA||elejnLMEmLwL4EMU+KWw3PDvYPn/PHXhR58sw708ST8cbhw5p7NO/JdP
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	MNrl7b+IsEeXcTkO||3il1UTbRW7zd1RFo1V/fr9FSDdkCcLjU9Jwje6s1vzooDbdPYl1X7P6uWMvorA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=MNrl7b+IsEeXcTkO||3il1UTbRW7zd1RFo1V/fr9FSDdkCcLjU9Jwje6s1vzooDbdPYl1X7P6uWMvorA
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=5yc8lDJko6TKw7HA||elejnLMEmLwL4EMU+KWw3PDvYPn/PHXhR58sw708ST8cbhw5p7NO/JdP
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=S3R9e0Wy5iKjy2r4||UoI/R2lTajcFjEZgJiKg0D4xMcTQe/md/SpKNji7flb2UYJM3Q
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testEncryptAuthorizersShouldHandleCommentedElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.077">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No unencrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testHandleFlowXmlMigrationWithIncorrectExistingPasswordShouldProvideHelpfulErrorMessage" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.03">
    <system-out><![CDATA[Encountered an error migrating flow content

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error: null
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Exception: 
java.lang.NullPointerException
	at java.nio.file.Paths.get(Paths.java:132)
	at java_nio_file_Paths$get.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.call(StaticMetaMethodSite.java:94)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionTool.getTemporaryFlowXmlFile(ConfigEncryptionTool.groovy:755)
	at org.apache.nifi.properties.ConfigEncryptionTool.migrateFlowXmlContent(ConfigEncryptionTool.groovy:721)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:190)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:58)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:63)
	at org.apache.nifi.properties.ConfigEncryptionTool.handleFlowXml(ConfigEncryptionTool.groovy:1525)
	at org.apache.nifi.properties.ConfigEncryptionTool.handleFlowXml(ConfigEncryptionTool.groovy)
	at org.apache.nifi.properties.ConfigEncryptionTool$handleFlowXml$10.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:119)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testHandleFlowXmlMigrationWithIncorrectExistingPasswordShouldProvideHelpfulErrorMessage_closure170.doCall(ConfigEncryptionToolTest.groovy:4244)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testHandleFlowXmlMigrationWithIncorrectExistingPasswordShouldProvideHelpfulErrorMessage_closure170.doCall(ConfigEncryptionToolTest.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:399)
	at groovy.test.GroovyAssert.shouldFail(GroovyAssert.java:118)
	at groovy.util.GroovyTestCase.shouldFail(GroovyTestCase.java:216)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:190)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:58)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:156)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:176)
	at org.apache.nifi.properties.ConfigEncryptionToolTest.testHandleFlowXmlMigrationWithIncorrectExistingPasswordShouldProvideHelpfulErrorMessage(ConfigEncryptionToolTest.groovy:4243)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.contrib.java.lang.system.ExpectedSystemExit$1.evaluate(ExpectedSystemExit.java:130)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:43)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:82)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:73)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Encountered an error migrating flow content
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptAuthorizersWithMultipleElementsPerLine" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.079">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property><property name="TLS - Keystore"></property><property name="TLS - Keystore Password" encryption="">thisIsABadPassword</property><property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">906UeYCQRGMunPMJ||RUMl/VpFi0VVJ5Skdorpmw6TeIpotikLE200V9jHu6k3Sg</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="aes/gcm/256">bOg6rJr0oP8BbFay||+8HXVuGF08SJmUX0HTx5VEPXJDQrm0hZtl1bEFLpy8nsgA</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">Iy78ANh9pfb+zFZt||VZe2iTBkCxfwE5CvygcdrKORqxI3L/t5Akbol+LbWNSU8Q</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">906UeYCQRGMunPMJ||RUMl/VpFi0VVJ5Skdorpmw6TeIpotikLE200V9jHu6k3Sg</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="aes/gcm/256">bOg6rJr0oP8BbFay||+8HXVuGF08SJmUX0HTx5VEPXJDQrm0hZtl1bEFLpy8nsgA</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">Iy78ANh9pfb+zFZt||VZe2iTBkCxfwE5CvygcdrKORqxI3L/t5Akbol+LbWNSU8Q</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 906UeYCQRGMunPMJ||RUMl/VpFi0VVJ5Skdorpmw6TeIpotikLE200V9jHu6k3Sg
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: bOg6rJr0oP8BbFay||+8HXVuGF08SJmUX0HTx5VEPXJDQrm0hZtl1bEFLpy8nsgA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: Iy78ANh9pfb+zFZt||VZe2iTBkCxfwE5CvygcdrKORqxI3L/t5Akbol+LbWNSU8Q
]]></system-err>
  </testcase>
  <testcase name="testSerializeAuthorizersAndPreserveFormatShouldHandleCommentedFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.1">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No unencrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - No provider element with class org.apache.nifi.ldap.tenants.LdapUserGroupProvider found in XML content; the file could be empty or the element may be missing or commented out
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testShouldDetectActionFlags" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.068">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h -v --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help -v --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --verbose --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --verbose --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-h --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--help --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '-v --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '--verbose --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking ' --translateCli' with acceptable args: [translateCli]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking ' --migrate' with acceptable args: [translateCli]
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking '' with acceptable args: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Clean run has action flags: false | Expected: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking ' --translateCli' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: c translateCli  :: Translates the nifi.properties file to a format suitable for the NiFi CLI tool :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Allowed run has action flags: true | Expected: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Checking ' --migrate' with acceptable args: []
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - In this mode, the following options are invalid: [[ option: m migrate  :: If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted with the new scheme :: class java.lang.String ]]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Unallowed run has action flags: true | Expected: true
]]></system-err>
  </testcase>
  <testcase name="testDecryptAuthorizersShouldHandleCommentedElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.055">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <!-- To enable the ldap-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>
    To enable the ldap-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">file-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testParseShouldIgnoreMigrationKeyAndPasswordIfMigrationNotEnabled" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.017">
    <system-out><![CDATA['-w'/'--oldPassword' and '-e'/'--oldKey' are ignored unless '-m'/'--migrate' is enabled

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
'-w'/'--oldPassword' and '-e'/'--oldKey' are ignored unless '-m'/'--migrate' is enabled

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [any/path] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] '-w'/'--oldPassword' and '-e'/'--oldKey' are ignored unless '-m'/'--migrate' is enabled
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [any/path] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] '-w'/'--oldPassword' and '-e'/'--oldKey' are ignored unless '-m'/'--migrate' is enabled
]]></system-err>
  </testcase>
  <testcase name="testShouldNotLoadMissingNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.01">
    <system-out><![CDATA[Cannot load NiFiProperties from [src/test/resources/non_existent_nifi.properties]

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/non_existent_nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed nifi.properties location: src/test/resources/non_existent_nifi.properties
]]></system-err>
  </testcase>
  <testcase name="testWriteNiFiPropertiesShouldHandleWriteFailureWhenFileDoesNotExist" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.004">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Set POSIX permissions to [OTHERS_READ, OWNER_READ, GROUP_READ]
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The nifi.properties file at target/tmp/tmp_nifi.properties must be writable by the user running this tool
]]></system-err>
  </testcase>
  <testcase name="testParseShouldWarnIfLoginIdentityProvidersWillBeOverwritten" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source login-identity-providers.xml and destination login-identity-providers.xml are identical [conf/login-identity-providers.xml] so the original will be overwritten
]]></system-err>
  </testcase>
  <testcase name="testShouldTranslateCliWithPlaintextInput" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.025">
    <system-out><![CDATA[baseUrl=https://nifi.nifi.apache.org:8443
keystore=/path/to/keystore.jks
keystoreType=JKS
keystorePasswd=thisIsABadKeystorePassword
keyPasswd=thisIsABadKeyPassword
truststore=
truststoreType=
truststorePasswd=
proxiedEntity=
Tried to exit with status 0.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi_with_sensitive_properties_unprotected.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - No encryption key present in the bootstrap.conf file at target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No root key detected in target/tmp/tmp_bootstrap.conf -- if src/test/resources/nifi_with_sensitive_properties_unprotected.properties is encrypted, the translation will fail
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - STDOUT:
	baseUrl=https://nifi.nifi.apache.org:8443
	keystore=/path/to/keystore.jks
	keystoreType=JKS
	keystorePasswd=thisIsABadKeystorePassword
	keyPasswd=thisIsABadKeyPassword
	truststore=
	truststoreType=
	truststorePasswd=
	proxiedEntity=
]]></system-err>
  </testcase>
  <testcase name="testUpdateBootstrapContentsWithKeyShouldOverwriteExistingKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated bootstrap.conf lines: [# Root key in hexadecimal format for encrypted sensitive configuration values, nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
]]></system-err>
  </testcase>
  <testcase name="testUpdateBootstrapContentsWithKeyShouldAddLines" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.005">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated bootstrap.conf lines: [
, # Root key in hexadecimal format for encrypted sensitive configuration values, nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
]]></system-err>
  </testcase>
  <testcase name="testFirstLineOfSerializedPropertiesShouldBeLocalizedDateTime" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.261">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 2 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Current time zone: Western European Time (Europe/Lisbon)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 CET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 SAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 SAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 SAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 EET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 CET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 HDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 PYT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 HDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 COT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 VET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 GFT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 ACT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 00:36:15 WGST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 ECT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 GYT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 BOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 PET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:36:15 PMDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 UYT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:36:15 FNT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 00:36:15 WGST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 SRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 ACT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 GMT-03:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 ACT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 CLT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 EGST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:06:15 NDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 AWST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 DAVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 DDUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 MAWT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NZST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 CLT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ROTT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NZST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 SYOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 VOST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 ALMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 ANAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 AQTT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 AQTT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 TMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 TMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 GMT+05:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 AZT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 GMT+07:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 KGT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 BNT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:06:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 YAKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CHOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:06:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 BDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 BDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 TLT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 TJT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 GMT+03:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 HKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 HOVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 IRKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 TRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 WIB 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 WIT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 IDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:06:15 AFT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 PETT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 PKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 XJT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:21:15 NPT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:21:15 NPT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 YAKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:06:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 KRAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 MYT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 MYT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 MAGT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 WITA 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 PST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 KRAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 NOVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 OMST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 ORAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 WIB 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 KST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 QOST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 QYZT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:06:15 MMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 SAKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 UZT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 KST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 SGT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 SRET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 UZT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:06:15 IRST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 IDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 BTT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 BTT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 JST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 GMT+07:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 WITA 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 ULAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 ULAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 XJT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 VLAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 VLAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 YAKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:06:15 MMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 YEKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 AZOST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 00:36:15 CVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:36:15 GST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 FKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:21:15 ACWST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:06:15 LHST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:06:15 LHST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 AWST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 AWST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 ACT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:36:15 FNT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:06:15 NDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 CLT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 EAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 00:36:15 GMT-01:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 GMT-10:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 GMT-11:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 13:36:15 GMT-12:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:36:15 GMT-02:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 GMT-03:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 GMT-04:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 GMT-05:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 GMT-06:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 GMT-07:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 GMT-08:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 GMT-09:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 GMT+01:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 GMT+10:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 GMT+11:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 GMT+12:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 GMT+13:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 15:36:15 GMT+14:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 GMT+02:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 GMT+03:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GMT+04:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 GMT+05:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 GMT+06:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 GMT+07:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 GMT+08:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 GMT+09:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GMT+04:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 TRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 EET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 GMT+03:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 MSK 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 MSK 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 SAMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GMT+04:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 MSK 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 GMT+04:00 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 MSK 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 HKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 GMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 IOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 CXT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:06:15 CCT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 TFT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 SCT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 MVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 MUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 RET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:06:15 IRST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 IDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 JST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 MHT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 EET 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 MEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NZST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:21:15 CHAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 WSST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NZST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 BST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:21:15 CHAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 CHUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 EAST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 VUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 PHOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 TKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 FJT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 TVT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 GALT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 GAMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 SBT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 ChST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 HST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 HST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 PHOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 15:36:15 LINT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 KOST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 MHT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 MHT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:06:15 MART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 SST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 NUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 NFT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 NCT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 SST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 PWT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 PST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 PONT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 PONT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 PGT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 CKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 ChST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 SST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 TAHT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 GILT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 TOT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 CHUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 WAKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 WFT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 CHUT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 KST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 SGT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ADT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 HST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 PST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 AKST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 TRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 16:36:15 HDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 HST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 19:36:15 MDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 14:36:15 SST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 MSK 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 02:36:15 WEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 01:36:15 UTC 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 EST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 15:36:15 HST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:06:15 ACST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 11:36:15 AEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 ART 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 17:36:15 AKDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 22:36:15 BRT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:36:15 BDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 23:06:15 NDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 20:36:15 CDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 09:36:15 CST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 04:36:15 EAT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 03:36:15 CEST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 EDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 07:06:15 IST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 10:36:15 JST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 14:36:15 WSST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 05:36:15 AMT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 13:36:15 NZST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 06:36:15 PKT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 MST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 21:36:15 AST 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Wed May 01 18:36:15 PDT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 12:36:15 SBT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First line date: #Thu May 02 08:36:15 ICT 2024
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reset current time zone to Western European Time (Europe/Lisbon)
]]></system-err>
  </testcase>
  <testcase name="testShouldParseOutputNiFiPropertiesArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.004">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output nifi.properties location: src/test/resources/nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output nifi.properties location: src/test/resources/nifi.properties
]]></system-err>
  </testcase>
  <testcase name="testShouldParseKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.013">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [   0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210   ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [xxx0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210zzz]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123-4567-0123-4567-0123-4567-0123-4567]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [01234567012345670123456701234567]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [89ab cdef 89ab cdef 89ab cdef 89ab cdef]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [89ABCDEF89ABCDEF89ABCDEF89ABCDEF]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123456789abcdeffedcba98765432100123456789abcdeffedcba9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123456789ABCDEFFEDCBA98765432100123456789ABCDEF]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key:  [0123456789ABCDEFFEDCBA98765432100123456789ABCDEF]
]]></system-err>
  </testcase>
  <testcase name="testWriteNiFiPropertiesShouldHandleWriteFailureWhenFileExists" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.006">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Set POSIX permissions to [OTHERS_READ, OWNER_READ, GROUP_READ]
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The nifi.properties file at target/tmp_nifi.properties must be writable by the user running this tool
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationOnAFlowXmlWithPreviouslyEncryptedNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.052">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 10 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:nififtw!, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original encrypted values: [nifi.security.keyPasswd:ttiSNTC7PUf2Hla7||W2OmVFn4bfB2ZJNBG55SaLneQeZahhF6GIaLZU+i4zRFfxKnlQ, nifi.security.keystorePasswd:vp9C9a8KbSYZFdUM||RoZHB1J+sRgCKG2vKBviOn71tdhsDYH42No+VmIaFMolrTMD/zmwcKev, nifi.security.truststorePasswd:, nifi.sensitive.props.key:UXcrW8T1UKAPJeun||ezUJSp30AvKGsRxJOOXoPUtZonv56Lx1, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key originally protected with aes/gcm/128
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# security properties #
nifi.sensitive.props.key=fgmll9+33WAD5/qk||heRxMqKLK/mzWx/655/OudEAxzYmEnQqxujvGxJxwCZXQA
nifi.sensitive.props.key.protected=aes/gcm/128
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=vp9C9a8KbSYZFdUM||RoZHB1J+sRgCKG2vKBviOn71tdhsDYH42No+VmIaFMolrTMD/zmwcKev
nifi.security.keystorePasswd.protected=aes/gcm/128
nifi.security.keyPasswd=ttiSNTC7PUf2Hla7||W2OmVFn4bfB2ZJNBG55SaLneQeZahhF6GIaLZU+i4zRFfxKnlQ
nifi.security.keyPasswd.protected=aes/gcm/128
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrated flow cipher texts for: target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original target/tmp/tmp-flow.xml.gz unique cipher texts: [enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}, enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrated target/tmp/tmp-flow.xml.gz unique cipher texts: [enc{2fefb6bc08be61e189c115039c01d94c30966c1eeba3ea215bf59450a11f42db02f70d55c59ec4d18a8e878b95864dab}, enc{7fb8ed6f99000ed39ff99d1ee21f80f247a2e6ec721f288a2df1b0b84b46b966ba86fa86efc8b5419b777d1d958eb4c4}]
]]></system-err>
  </testcase>
  <testcase name="testSerializeAuthorizersAndPreserveFormatShouldHandleRenamedProvider" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.138">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">xnKUdF5XUM5pe2h1||vC2bXTct7VqpYOpvZd4+T0G5wtlJy0boJgSjX05hJE6+sQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">mS93dF2VOLPhnD7I||imSjFpCg5pxzvkqsyqVPud0G9QXVM8GIoeP42S4bunq80A</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BPe4pO1U14K7Mc1s||fuLBOSxgSmhQII3//uIkWVq4lM/qxhwu7ss0yzTI2wQeUQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">xnKUdF5XUM5pe2h1||vC2bXTct7VqpYOpvZd4+T0G5wtlJy0boJgSjX05hJE6+sQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">mS93dF2VOLPhnD7I||imSjFpCg5pxzvkqsyqVPud0G9QXVM8GIoeP42S4bunq80A</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BPe4pO1U14K7Mc1s||fuLBOSxgSmhQII3//uIkWVq4lM/qxhwu7ss0yzTI2wQeUQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">xnKUdF5XUM5pe2h1||vC2bXTct7VqpYOpvZd4+T0G5wtlJy0boJgSjX05hJE6+sQ</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">mS93dF2VOLPhnD7I||imSjFpCg5pxzvkqsyqVPud0G9QXVM8GIoeP42S4bunq80A</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">BPe4pO1U14K7Mc1s||fuLBOSxgSmhQII3//uIkWVq4lM/qxhwu7ss0yzTI2wQeUQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testSerializeAuthorizersAndPreserveFormatShouldHandleEmptyFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.012">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 

[Fatal Error] :1:1: Premature end of file.
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - No provider element with class org.apache.nifi.ldap.tenants.LdapUserGroupProvider found in XML content; the file could be empty or the element may be missing or commented out
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 

]]></system-err>
  </testcase>
  <testcase name="testSerializeAuthorizersAndPreserveFormatShouldRespectComments" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.105">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">CZ8UUU+ly19WRb5P||qvJ5WYb6guoWaEr6LvincTmLpopz1Lz/j+mPggJ70R/gHQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">nyG0KiDl9FWIKe9l||1I3tCyL2PMAz5g12fvuD9oeKIOmdlNGThSmW7Jrup0iuag</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">Npt62oSGpnpPECOc||kvYC3hbIWItl+BSbvCtM/1zv6MF+15LvrWW2LQfnQcJ1gQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">CZ8UUU+ly19WRb5P||qvJ5WYb6guoWaEr6LvincTmLpopz1Lz/j+mPggJ70R/gHQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">nyG0KiDl9FWIKe9l||1I3tCyL2PMAz5g12fvuD9oeKIOmdlNGThSmW7Jrup0iuag</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">Npt62oSGpnpPECOc||kvYC3hbIWItl+BSbvCtM/1zv6MF+15LvrWW2LQfnQcJ1gQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">CZ8UUU+ly19WRb5P||qvJ5WYb6guoWaEr6LvincTmLpopz1Lz/j+mPggJ70R/gHQ</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">nyG0KiDl9FWIKe9l||1I3tCyL2PMAz5g12fvuD9oeKIOmdlNGThSmW7Jrup0iuag</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">Npt62oSGpnpPECOc||kvYC3hbIWItl+BSbvCtM/1zv6MF+15LvrWW2LQfnQcJ1gQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testShouldTranslateCli" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.009">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded NiFiProperties from src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Translated to CLI format: 
baseUrl=https://nifi.nifi.apache.org:8443
keystore=/path/to/keystore.jks
keystoreType=JKS
keystorePasswd=thisIsABadKeystorePassword
keyPasswd=thisIsABadKeyPassword
truststore=
truststoreType=
truststorePasswd=
proxiedEntity=
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptAuthorizersWithMultilineElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.07">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption=
                "aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property
                name="TLS - Keystore Password"
                encryption="aes/gcm/128">
            Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g
        </property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt 
            Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g
         using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testParseShouldIgnoreFilesIfOverrideFlagPresent" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [conf/nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [conf/flow.xml.gz] so the original will be overwritten
]]></system-err>
  </testcase>
  <testcase name="testShouldActuallyDeriveKeyFromPassword" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.217">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Derived key:  [2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE]
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationForNiFiPropertiesAndLoginIdentityProvidersAndAuthorizers" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.184">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original LIP XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original Authorizers XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: src/test/resources/login-identity-providers-populated.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: target/tmp/tmp-lip.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              src/test/resources/authorizers-populated.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              target/tmp/tmp-authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded login identity providers content (105 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Ke/2JIUt/hNDRKTM||EZcSoWfv1SbJpRk4kkXPQhmoUCm+i7QMH1JDxx26d+MVyQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">/PDNspGezYtwumw0||gOxbLzcREKTL76OEFr6e9aEfXknv/mg6u+4JBwItwu/feA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">6lV6Byq2PcAH0r31||SOtHXjHcB7zCZpogep72EK2Nu9DMBG8Cj1C3O/O0Fwpe5Q</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded authorizers content (309 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Qc7A+d/Bx5sAMNFL||B15NSqlnQgnbq74GLFD008ehGvspuk+IfLDay3jyna+Qwg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">zmSc8pNtDjrzJciX||QKOLzn1IyP49jkC7SQ7Huvh9vr/c6GyuWCdbvlQZWolFbA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">a+qfsP2GNByBXWSc||gK1nS73h2bFFXKB/JxVJsO4dnk4YWswHBlQlE+nG4fIK+g</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	tPbtM2w6kLmum118||xZjaoMBN4M7LKl98Ec6waM50zXKLL4CqP72bWmtw2/54jGkWVA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	Kc9b3yNbcKLzK+EH||N6CLdLe3stet73p+m+O4G3BoptAHhN4QRX56mKDOZvfjXAQyprUX2iYw
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	aSYnJ+NHvr4e+IlL||UO6GO47k5FzEhcqGGuTVTPBee3nXxOoG1luerIW6pkEIpFN4kcSm9ZpOD3HirA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=aSYnJ+NHvr4e+IlL||UO6GO47k5FzEhcqGGuTVTPBee3nXxOoG1luerIW6pkEIpFN4kcSm9ZpOD3HirA
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=Kc9b3yNbcKLzK+EH||N6CLdLe3stet73p+m+O4G3BoptAHhN4QRX56mKDOZvfjXAQyprUX2iYw
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=tPbtM2w6kLmum118||xZjaoMBN4M7LKl98Ec6waM50zXKLL4CqP72bWmtw2/54jGkWVA
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated LIP XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">Ke/2JIUt/hNDRKTM||EZcSoWfv1SbJpRk4kkXPQhmoUCm+i7QMH1JDxx26d+MVyQ</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">/PDNspGezYtwumw0||gOxbLzcREKTL76OEFr6e9aEfXknv/mg6u+4JBwItwu/feA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">6lV6Byq2PcAH0r31||SOtHXjHcB7zCZpogep72EK2Nu9DMBG8Cj1C3O/O0Fwpe5Q</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated Authorizers XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">Qc7A+d/Bx5sAMNFL||B15NSqlnQgnbq74GLFD008ehGvspuk+IfLDay3jyna+Qwg</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">zmSc8pNtDjrzJciX||QKOLzn1IyP49jkC7SQ7Huvh9vr/c6GyuWCdbvlQZWolFbA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">a+qfsP2GNByBXWSc||gK1nS73h2bFFXKB/JxVJsO4dnk4YWswHBlQlE+nG4fIK+g</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldLoadFlowXmlContent" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.03">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read flow.xml: 
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<flowController encoding-version="1.0">
    <maxTimerDrivenThreadCount>10</maxTimerDrivenThreadCount>
    <maxEventDrivenThreadCount>5</maxEventDrivenThreadCount>
    <rootGroup>
        <id>fcf146b2-0157-1000-7850-7adf1d31e3fa</id>
        <name>NiFi Flow</name>
        <position x="0.0" y="0.0"/>
        <comment/>
        <processGroup>
            <id>8a61ec1d-0158-1000-3a1a-12c54fe77838</id>
            <name>EncryptedProperties Example</name>
            <position x="1119.0" y="295.0"/>
            <comment/>
            <processor>
                <id>8a621f0b-0158-1000-b5c2-92a09a124501</id>
                <name>Encrypt</name>
                <position x="626.0" y="237.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Encrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <processor>
                <id>8a6314ee-0158-1000-6dd0-60f153db26c1</id>
                <name>Decrypt</name>
                <position x="630.0" y="482.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Decrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <connection>
                <id>8a636069-0158-1000-50ff-244f2a8eeb7a</id>
                <name/>
                <bendPoints/>
                <labelIndex>1</labelIndex>
                <zIndex>0</zIndex>
                <sourceId>8a621f0b-0158-1000-b5c2-92a09a124501</sourceId>
                <sourceGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</sourceGroupId>
                <sourceType>PROCESSOR</sourceType>
                <destinationId>8a6314ee-0158-1000-6dd0-60f153db26c1</destinationId>
                <destinationGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</destinationGroupId>
                <destinationType>PROCESSOR</destinationType>
                <relationship>success</relationship>
                <maxWorkQueueSize>10000</maxWorkQueueSize>
                <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
                <flowFileExpiration>0 sec</flowFileExpiration>
            </connection>
        </processGroup>
    </rootGroup>
    <controllerServices/>
    <reportingTasks/>
</flowController>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded flow.xml.gz: 
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<flowController encoding-version="1.0">
    <maxTimerDrivenThreadCount>10</maxTimerDrivenThreadCount>
    <maxEventDrivenThreadCount>5</maxEventDrivenThreadCount>
    <rootGroup>
        <id>fcf146b2-0157-1000-7850-7adf1d31e3fa</id>
        <name>NiFi Flow</name>
        <position x="0.0" y="0.0"/>
        <comment/>
        <processGroup>
            <id>8a61ec1d-0158-1000-3a1a-12c54fe77838</id>
            <name>EncryptedProperties Example</name>
            <position x="1119.0" y="295.0"/>
            <comment/>
            <processor>
                <id>8a621f0b-0158-1000-b5c2-92a09a124501</id>
                <name>Encrypt</name>
                <position x="626.0" y="237.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Encrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <processor>
                <id>8a6314ee-0158-1000-6dd0-60f153db26c1</id>
                <name>Decrypt</name>
                <position x="630.0" y="482.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Decrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <connection>
                <id>8a636069-0158-1000-50ff-244f2a8eeb7a</id>
                <name/>
                <bendPoints/>
                <labelIndex>1</labelIndex>
                <zIndex>0</zIndex>
                <sourceId>8a621f0b-0158-1000-b5c2-92a09a124501</sourceId>
                <sourceGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</sourceGroupId>
                <sourceType>PROCESSOR</sourceType>
                <destinationId>8a6314ee-0158-1000-6dd0-60f153db26c1</destinationId>
                <destinationGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</destinationGroupId>
                <destinationType>PROCESSOR</destinationType>
                <relationship>success</relationship>
                <maxWorkQueueSize>10000</maxWorkQueueSize>
                <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
                <flowFileExpiration>0 sec</flowFileExpiration>
            </connection>
        </processGroup>
    </rootGroup>
    <controllerServices/>
    <reportingTasks/>
</flowController>

]]></system-err>
  </testcase>
  <testcase name="testSerializeAuthorizersAndPreserveFormatShouldHandleComplexProperty" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.179">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testTranslateCliWithEncryptedInputShouldNotIntersperseVerboseOutput" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.051">
    <system-out><![CDATA[baseUrl=https://nifi.nifi.apache.org:8443
keystore=/path/to/keystore.jks
keystoreType=JKS
keystorePasswd=thisIsABadKeystorePassword
keyPasswd=thisIsABadKeyPassword
truststore=
truststoreType=
truststorePasswd=
proxiedEntity=
Tried to exit with status 0.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi_with_sensitive_properties_protected_aes.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
org.junit.contrib.java.lang.system.internal.CheckExitCalled: Tried to exit with status 0.
	at org.junit.contrib.java.lang.system.internal.NoExitSecurityManager.checkExit(NoExitSecurityManager.java:24)
	at java.lang.Runtime.exit(Runtime.java:101)
	at java.lang.System.exit(System.java:987)
	at java_lang_System$exit$1.call(Unknown Source)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1374)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest.testTranslateCliWithEncryptedInputShouldNotIntersperseVerboseOutput(ConfigEncryptionToolTest.groovy:4624)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.contrib.java.lang.system.ExpectedSystemExit$1.evaluate(ExpectedSystemExit.java:130)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:43)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:82)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:73)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - STDOUT:
	baseUrl=https://nifi.nifi.apache.org:8443
	keystore=/path/to/keystore.jks
	keystoreType=JKS
	keystorePasswd=thisIsABadKeystorePassword
	keyPasswd=thisIsABadKeyPassword
	truststore=
	truststoreType=
	truststorePasswd=
	proxiedEntity=
]]></system-err>
  </testcase>
  <testcase name="testShouldHandleKeyAndPasswordFlag" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.01">
    <system-out><![CDATA[Only one of '-p'/'--password' and '-k'/'--key' can be used

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using args: [-k, 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210, -p, thisIsABadPassword, -n, ]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Only one of '-p'/'--password' and '-k'/'--key' can be used
]]></system-err>
  </testcase>
  <testcase name="testTranslateCliShouldFailIfMissingNecessaryFlags" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.012">
    <system-out><![CDATA[When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-b, bootstrap.conf, -c]
]]></system-err>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldHandleCommentedFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.033">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No unencrypted password property elements found in login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - No provider element with class org.apache.nifi.ldap.LdapProvider found in XML content; the file could be empty or the element may be missing or commented out
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testParseShouldWarnIfNiFiPropertiesWillBeOverwritten" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [conf/nifi.properties] so the original will be overwritten
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFlowXmlContent" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.006">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read flow.xml as input stream.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Found 2 unique encrypted properties in the original flow.xml content
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrated flow.xml.
]]></system-err>
  </testcase>
  <testcase name="testShouldIgnoreRawKeyFlagIfPasswordProvided" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - If the key or password is provided in the arguments, '-r'/'--useRawKey' is ignored
]]></system-err>
  </testcase>
  <testcase name="testMigrateFlowXmlContentShouldUseConstantSalt" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.022">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read flow.xml: 
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<flowController encoding-version="1.0">
    <maxTimerDrivenThreadCount>10</maxTimerDrivenThreadCount>
    <maxEventDrivenThreadCount>5</maxEventDrivenThreadCount>
    <rootGroup>
        <id>fcf146b2-0157-1000-7850-7adf1d31e3fa</id>
        <name>NiFi Flow</name>
        <position x="0.0" y="0.0"/>
        <comment/>
        <processGroup>
            <id>8a61ec1d-0158-1000-3a1a-12c54fe77838</id>
            <name>EncryptedProperties Example</name>
            <position x="1119.0" y="295.0"/>
            <comment/>
            <processor>
                <id>8a621f0b-0158-1000-b5c2-92a09a124501</id>
                <name>Encrypt</name>
                <position x="626.0" y="237.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Encrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <processor>
                <id>8a6314ee-0158-1000-6dd0-60f153db26c1</id>
                <name>Decrypt</name>
                <position x="630.0" y="482.0"/>
                <styles/>
                <comment/>
                <class>org.apache.nifi.processors.standard.EncryptContent</class>
                <maxConcurrentTasks>1</maxConcurrentTasks>
                <schedulingPeriod>0 sec</schedulingPeriod>
                <penalizationPeriod>30 sec</penalizationPeriod>
                <yieldPeriod>1 sec</yieldPeriod>
                <bulletinLevel>WARN</bulletinLevel>
                <lossTolerant>false</lossTolerant>
                <scheduledState>STOPPED</scheduledState>
                <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                <runDurationNanos>0</runDurationNanos>
                <property>
                    <name>Mode</name>
                    <value>Decrypt</value>
                </property>
                <property>
                    <name>key-derivation-function</name>
                    <value>NIFI_LEGACY</value>
                </property>
                <property>
                    <name>Encryption Algorithm</name>
                    <value>MD5_128AES</value>
                </property>
                <property>
                    <name>allow-weak-crypto</name>
                    <value>not-allowed</value>
                </property>
                <property>
                    <name>Password</name>
                    <value>enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}</value>
                </property>
                <property>
                    <name>raw-key-hex</name>
                </property>
                <property>
                    <name>public-keyring-file</name>
                </property>
                <property>
                    <name>public-key-user-id</name>
                </property>
                <property>
                    <name>private-keyring-file</name>
                </property>
                <property>
                    <name>private-keyring-passphrase</name>
                </property>
            </processor>
            <connection>
                <id>8a636069-0158-1000-50ff-244f2a8eeb7a</id>
                <name/>
                <bendPoints/>
                <labelIndex>1</labelIndex>
                <zIndex>0</zIndex>
                <sourceId>8a621f0b-0158-1000-b5c2-92a09a124501</sourceId>
                <sourceGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</sourceGroupId>
                <sourceType>PROCESSOR</sourceType>
                <destinationId>8a6314ee-0158-1000-6dd0-60f153db26c1</destinationId>
                <destinationGroupId>8a61ec1d-0158-1000-3a1a-12c54fe77838</destinationGroupId>
                <destinationType>PROCESSOR</destinationType>
                <relationship>success</relationship>
                <maxWorkQueueSize>10000</maxWorkQueueSize>
                <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
                <flowFileExpiration>0 sec</flowFileExpiration>
            </connection>
        </processGroup>
    </rootGroup>
    <controllerServices/>
    <reportingTasks/>
</flowController>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Found 2 encrypted properties in the original flow.xml content
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrated flow.xml.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - First detected salt: 55ac4d3a3ff822cb70110e46e2cbc99d
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptAuthorizers" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.043">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testShouldParseAuthorizersArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.003">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source authorizers.xml and destination authorizers.xml are identical [src/test/resources/authorizers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed authorizers.xml location: src/test/resources/authorizers.xml
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source authorizers.xml and destination authorizers.xml are identical [src/test/resources/authorizers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed authorizers.xml location: src/test/resources/authorizers.xml
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptLoginIdentityProviders" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.031">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationOnFlowXmlMultipleTimes" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.209">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 10 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:nififtw!, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original encrypted values: [nifi.security.keyPasswd:ttiSNTC7PUf2Hla7||W2OmVFn4bfB2ZJNBG55SaLneQeZahhF6GIaLZU+i4zRFfxKnlQ, nifi.security.keystorePasswd:vp9C9a8KbSYZFdUM||RoZHB1J+sRgCKG2vKBviOn71tdhsDYH42No+VmIaFMolrTMD/zmwcKev, nifi.security.truststorePasswd:, nifi.sensitive.props.key:UXcrW8T1UKAPJeun||ezUJSp30AvKGsRxJOOXoPUtZonv56Lx1, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key originally protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from nififtw! to thisIsABadPassword0
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword0
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=7mSvXCYIo7grs5Rg||vz4RNBaq8fBODw/nrCVG3gXBmodcgrnLIjUos79x0LnLE50
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}, enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{0cd275b3afe92a028a4fb31b0d8f3e4d975b641f75bbfb1d7aef8d6fba69efea9730c06833c21405560db704835b17ab}, enc{98b75cf477c2a2b97ed2218769abf0a786c9227b5bb421264fc396daad5bcf21eb531386076c16e77e22169cf036c186}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword0 to thisIsABadPassword1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword1
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=xA4VcquryQPnTa2u||mem5Ni43RzKRSaLV5SQF66A4RtO959n5lORxTNQWrfrPLE8
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{0cd275b3afe92a028a4fb31b0d8f3e4d975b641f75bbfb1d7aef8d6fba69efea9730c06833c21405560db704835b17ab}, enc{98b75cf477c2a2b97ed2218769abf0a786c9227b5bb421264fc396daad5bcf21eb531386076c16e77e22169cf036c186}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{bcb6ec999f8b7addf04edfd8edf890088f6f9224382699ac338dad0c879f89eb86ea9d99c9df371dd1556a5c20e5cdb9}, enc{170b2fc048c171e0981d1a9f1ca26ffa08053daf578f6d1130c362793087dedd519a395bda200b30d2d3855a8b64d966}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword1 to thisIsABadPassword2
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword2
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=qkQpMFm5Zn99hJ2J||D3jw1Achzw+ihyAGSspR1hBWihzwENRhwuLiYn7XH9JfdXI
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{bcb6ec999f8b7addf04edfd8edf890088f6f9224382699ac338dad0c879f89eb86ea9d99c9df371dd1556a5c20e5cdb9}, enc{170b2fc048c171e0981d1a9f1ca26ffa08053daf578f6d1130c362793087dedd519a395bda200b30d2d3855a8b64d966}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{2a152c3d11852efa6aef94885498562eb08d857c5fb1c7a234826dff06004ff9b3e8cefa6dd5ba9a2edfb7ecd36cd2a5}, enc{4d700c36a8579e6a57c005f0481b34181a9fbb77f2ea10ce3bd00f91167492983133d60a14a757534c0c01770d276719}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword2 to thisIsABadPassword3
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword3
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=4BpYZDzC8VKB+62/||7pz4IEqMTHl6lA4groMZ9bj47mlGuvalztQVEugf9ClCqdA
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{2a152c3d11852efa6aef94885498562eb08d857c5fb1c7a234826dff06004ff9b3e8cefa6dd5ba9a2edfb7ecd36cd2a5}, enc{4d700c36a8579e6a57c005f0481b34181a9fbb77f2ea10ce3bd00f91167492983133d60a14a757534c0c01770d276719}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{1d153da2c22488297aef0006bbca6c638b3eb9057f90465834d69188b42613f94ea7e27d0c108c83fb2bcd438d42db77}, enc{83801ba0247b06547edec52b55981d08f1edd4845e188e6f8dcfef20d9b7e4660f812019e49e14ed5175f75ead781aef}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword3 to thisIsABadPassword4
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword4
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=CMeFCwh0xq928LoN||r4I4muGJhOf7hJddnipcAZl9F6ypqhVv///+VrIJkJQeGOc
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{1d153da2c22488297aef0006bbca6c638b3eb9057f90465834d69188b42613f94ea7e27d0c108c83fb2bcd438d42db77}, enc{83801ba0247b06547edec52b55981d08f1edd4845e188e6f8dcfef20d9b7e4660f812019e49e14ed5175f75ead781aef}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{7b20023ff3ec3f59396d83e54c5aeead26e663e2c963c96959ea31012d4743086ef9885ee8056eeecf43f20a4865195f}, enc{6c88c96dec366f9e219e5186066665e5fe9247b329db84d97f03877eba282b22a17da55fb2923a995f99b649d1162d2f}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword4 to thisIsABadPassword5
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main with -n target/tmp/tmp-nifi.properties -f target/tmp/tmp-flow.xml.gz -b target/tmp/tmp_bootstrap.conf -x -v -s thisIsABadPassword5
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.sensitive.props.key=SK8H6D24lmNv/8LG||2jPqnFgpIzBBNw/evyDHgABWrMEeDiiOrLrPnZKWrjDBu14
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{7b20023ff3ec3f59396d83e54c5aeead26e663e2c963c96959ea31012d4743086ef9885ee8056eeecf43f20a4865195f}, enc{6c88c96dec366f9e219e5186066665e5fe9247b329db84d97f03877eba282b22a17da55fb2923a995f99b649d1162d2f}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{7ae8ec43b1f83ecd44126fed4de5995331a9bdb3ce496245cb08ad17a49e7ff538346038be6d2c65e265c8da985ae73d}, enc{24d52d54b7f9177d4d4f0e210b1750b657194ae467657c618d1b4dc2f274a3d75f43f6e03ffa6de5f5edefa7b3beb19a}]
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptAuthorizersWithEmptySensitiveElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.056">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">lXzK+34t9BaAdLGn||NgSvIXlNeiZha5RG6hCcOqhNN+F0gtf0zL9KokbmBQ43mg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password"/>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password"/>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">lXzK+34t9BaAdLGn||NgSvIXlNeiZha5RG6hCcOqhNN+F0gtf0zL9KokbmBQ43mg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password"/>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password"/>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: lXzK+34t9BaAdLGn||NgSvIXlNeiZha5RG6hCcOqhNN+F0gtf0zL9KokbmBQ43mg
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptAuthorizersWithRenamedProvider" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.054">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">naSHecZooTbr6r5h||z/+JRjbJGlXh252O5AtQeF/dOqgkryBbXkAMEtyHnj9NIA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">rJ14g//hHktNa4IQ||lKKmrTYu+3OTE3mPhy+8mkQh6ggbJ/zfjQgd+yjdYHCoig</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">2y7IwaRV0+DbsHnC||nAuoUbMfokwByGlrcJ2icSDHa44pYA4Sq8ActIPlm+fYMw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>renamed-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">naSHecZooTbr6r5h||z/+JRjbJGlXh252O5AtQeF/dOqgkryBbXkAMEtyHnj9NIA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">rJ14g//hHktNa4IQ||lKKmrTYu+3OTE3mPhy+8mkQh6ggbJ/zfjQgd+yjdYHCoig</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">2y7IwaRV0+DbsHnC||nAuoUbMfokwByGlrcJ2icSDHa44pYA4Sq8ActIPlm+fYMw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">renamed-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: naSHecZooTbr6r5h||z/+JRjbJGlXh252O5AtQeF/dOqgkryBbXkAMEtyHnj9NIA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: rJ14g//hHktNa4IQ||lKKmrTYu+3OTE3mPhy+8mkQh6ggbJ/zfjQgd+yjdYHCoig
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 2y7IwaRV0+DbsHnC||nAuoUbMfokwByGlrcJ2icSDHa44pYA4Sq8ActIPlm+fYMw
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptAuthorizersWithMultilineElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.058">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">
            thisIsABadPassword
        </property>

        <property name="TLS - Keystore"></property>
        <property
                name="TLS - Keystore Password">thisIsABadPassword
        </property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name=
                          "TLS - Truststore Password">
            thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">/xDbzEgzR1g/Lfq9||1pkebyEXQId10tHjHn88bp84aac7pJP371a6vs9AT/H+0w</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">0luTgtmHggvop7v9||hpyrj3uccmiWEpAqwcxVUKXTdS0y/HqKqtN8V0ZcGoO/Gg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">ZreXD3y4Evr9cZka||CMgyh7GJahrb928M8KOab50FTnVbRoil8hTHDMENgx8TVA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">/xDbzEgzR1g/Lfq9||1pkebyEXQId10tHjHn88bp84aac7pJP371a6vs9AT/H+0w</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">0luTgtmHggvop7v9||hpyrj3uccmiWEpAqwcxVUKXTdS0y/HqKqtN8V0ZcGoO/Gg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">ZreXD3y4Evr9cZka||CMgyh7GJahrb928M8KOab50FTnVbRoil8hTHDMENgx8TVA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: /xDbzEgzR1g/Lfq9||1pkebyEXQId10tHjHn88bp84aac7pJP371a6vs9AT/H+0w
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 0luTgtmHggvop7v9||hpyrj3uccmiWEpAqwcxVUKXTdS0y/HqKqtN8V0ZcGoO/Gg
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: ZreXD3y4Evr9cZka||CMgyh7GJahrb928M8KOab50FTnVbRoil8hTHDMENgx8TVA
]]></system-err>
  </testcase>
  <testcase name="testParseKeyShouldThrowExceptionForInvalidKeys" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.016">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123 4567]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The key (8 hex chars) must be of length [128, 192, 256] bits ([32, 48, 64] hex characters)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [non-hex-chars]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The key (3 hex chars) must be of length [128, 192, 256] bits ([32, 48, 64] hex characters)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA987654321]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The key (63 hex chars) must be of length [128, 192, 256] bits ([32, 48, 64] hex characters)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading key: [&ITD SF^FI&&%SDIF]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] The key (5 hex chars) must be of length [128, 192, 256] bits ([32, 48, 64] hex characters)
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFlowXmlContentMultipleTimes" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.022">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts: 
enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}
enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Found 2 encrypted properties in the original flow.xml content
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from nififtw! to thisIsABadPassword0
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 0: 
enc{2cf3a7118684d9827f4760ee89f445e62da83ecbcb1f8900bc0c8cf273dee10107a652ccc34c5a0dd3eb3677834faa0e}
enc{a976ecea38fcb8a2263e3de0dfcd85f3d41a361b902a702951dc4236d0f2e01e032ab874fed5154bd77fa2458d0c417f}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword0 to thisIsABadPassword1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 1: 
enc{5027543c9748fe23123cc45e137fecc5a8117097bc38e24940780376fb8a864eeb07595208cd05fb4a3dcf6408554ade}
enc{9a8ad7d7ed18cbb792c01c71fe286579dd9f0cd33e0a90666f9e2062875c075a794e352c8a93cee646eb533562c45a8e}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword1 to thisIsABadPassword2
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 2: 
enc{244c9cd4dc6501c25f92835bf3539db9e70484d18f9e664867dfbe1ee63cf72e0364fb7a4f0e9aa4ae1a92fac4687596}
enc{dbce61aa497e911726787780080dbc6edcf1c047219e22f429e9ec5850e727faa97c1a3d959a8b31d339d3ecb3dae781}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword2 to thisIsABadPassword3
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 3: 
enc{2b12a073dac4e74e43aaa978d09847a77e30ee6fe9cd24b12fe0a9da8db92e40c26016bb5f49ffebc3705e493db9a386}
enc{e4b789beb5b6a9e8a2412ce4b6d4d4365fc950776bd91bb8b8f75370eae1973d386e8578a5b7337bd39a1661ac22fdb5}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword3 to thisIsABadPassword4
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 4: 
enc{56ea1476a6b00d91febf7bf434086514f1ca43771624143df4ce8ce43a4a6bd2f2ccea9b8105128c625737553f4f92fd}
enc{11c1a294119d1c2cd66a688ac597191395345187db3aba75116579d34abf8608a7b7e3458850d871e2ad25c2d7bd213b}
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating from thisIsABadPassword4 to thisIsABadPassword5
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher texts for iteration 5: 
enc{6c2b6c75248c4fdb492a6e90debbe5a90d82719438d7c411050a5f4373a77cc53c2c5662c40bf8c4d38a37f0a759896f}
enc{836a58d46554132e343d9c7013a97213270bd61ca9f1196ff268a0724cac7d4dfbf977b7b84c89d6cae52796343ce4e9}
]]></system-err>
  </testcase>
  <testcase name="testLoadNiFiPropertiesShouldHandleReadFailure" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Set POSIX permissions to []
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp_nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] ERROR org.apache.nifi.properties.NiFiPropertiesLoader - Cannot read from '/home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp_nifi.properties' -- file is missing or not readable
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot load NiFiProperties from [target/tmp_nifi.properties]
]]></system-err>
  </testcase>
  <testcase name="testShouldIgnoreRawKeyFlagIfKeyProvided" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - If the key or password is provided in the arguments, '-r'/'--useRawKey' is ignored
]]></system-err>
  </testcase>
  <testcase name="testDeriveKeyFromPasswordShouldTrimPassword" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.483">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [thisIsABadPassword]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Derived key:  [2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password: [   thisIsABadPassword   ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Derived key:  [2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE]
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationMigratingLoginIdentityProviders" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.064">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA9876543210
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: src/test/resources/login-identity-providers-populated-encrypted.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: target/tmp/tmp-lip.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded login identity providers content (105 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">lDA2Jn4Ym6TQdn1P||dvAPPLeTh66y6pUzbzz4nAVPuHVFlICMsqMo0gmmrwSGkw</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">ynBezBQSpPN4J0jX||/KedhPKrzJsg8NMlC7+1guCKzS55uadGkMgtb0u4QOXhvA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">EWs8EOBga9H8enSF||43YidHbL8GDHrhVBvMCcQG7Fl1We8PZ+cwxW+KG5RYPlmw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">lDA2Jn4Ym6TQdn1P||dvAPPLeTh66y6pUzbzz4nAVPuHVFlICMsqMo0gmmrwSGkw</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">ynBezBQSpPN4J0jX||/KedhPKrzJsg8NMlC7+1guCKzS55uadGkMgtb0u4QOXhvA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">EWs8EOBga9H8enSF||43YidHbL8GDHrhVBvMCcQG7Fl1We8PZ+cwxW+KG5RYPlmw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
]]></system-err>
  </testcase>
  <testcase name="testParseShouldFailIfMigrationPasswordAndKeyBothProvided" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.007">
    <system-out><![CDATA[Only one of '-w'/'--oldPassword' and '-e'/'--oldKey' can be used

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Only one of '-w'/'--oldPassword' and '-e'/'--oldKey' can be used
]]></system-err>
  </testcase>
  <testcase name="testShouldParseOutputLoginIdentityProvidersArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.003">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source login-identity-providers.xml and destination login-identity-providers.xml are identical [src/test/resources/login-identity-providers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output login-identity-providers.xml location: src/test/resources/login-identity-providers.xml
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source login-identity-providers.xml and destination login-identity-providers.xml are identical [src/test/resources/login-identity-providers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output login-identity-providers.xml location: src/test/resources/login-identity-providers.xml
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptNiFiPropertiesWithEmptyProtectionScheme" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.018">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read 124 lines from src/test/resources/nifi_with_sensitive_properties_unprotected_and_empty_protection_schemes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0...
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 84 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected_and_empty_protection_schemes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded NiFiProperties from src/test/resources/nifi_with_sensitive_properties_unprotected_and_empty_protection_schemes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 84 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - There are 9 sensitive properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Counted 0 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	UM3ntDtCVnR3h9ar||TXZsMG+C77RzmBqv79j40/r3V661zEQHxfTZfAEyT6hrt8dEyg
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	ga/2L8cuwhOa5SMy||4/O1TFulJJTM1LAdoUCvcdEnSpDAFbh3E7hQiJ7uxSNIpUZmp+lOZXAX
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	01yi7aWhIfTVonFH||h16TI4XqrCfP1RIITmuWxRu8yj365tv7GBdJN6LimjwkyWjKt9/ehs3Xs7axhA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 86 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keystorePasswd is protected by aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.administrative.yield.duration		30 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.is.manager		false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.is.node		false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.address		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.authority.provider.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.authority.provider.threads		10
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.flow.retrieval.delay		5 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.node.api.connection.timeout		30 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.node.api.read.timeout		30 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.node.api.request.threads		10
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.node.event.history.size		10
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.node.firewall.file		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.protocol.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.protocol.threads		10
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.manager.safemode.duration		0 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.address		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.protocol.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.protocol.threads		2
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.unicast.manager.address		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.unicast.manager.authority.provider.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.node.unicast.manager.protocol.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.connection.handshake.timeout		45 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.heartbeat.interval		5 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.is.secure		false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.multicast.address		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.multicast.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.multicast.service.broadcast.delay		500 ms
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.multicast.service.locator.attempts		3
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.multicast.service.locator.attempts.delay		1 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.socket.timeout		30 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.cluster.protocol.use.multicast		false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.content.claim.max.appendable.size		10 MB
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.content.claim.max.flow.files		100
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.content.repository.directory.default		./target/content_repository
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.controller.service.configuration.file		./target/controller-services.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.database.directory		./target/database_repository
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flow.configuration.archive.dir		./target/archive/
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flow.configuration.file		./target/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowcontroller.autoResumeState		true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowcontroller.graceful.shutdown.period		10 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowfile.repository.checkpoint.interval		2 mins
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowfile.repository.directory		./target/test-repo
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowfile.repository.partitions		1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.flowservice.writedelay.interval		2 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.h2.url.append		;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.nar.library.directory		./target/resources/NiFiProperties/lib/
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.nar.library.directory.alt		./target/resources/NiFiProperties/lib2/
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.nar.working.directory		./target/work/nar/
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.provenance.repository.max.storage.size		1 GB
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.provenance.repository.max.storage.time		24 hours
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.provenance.repository.rollover.size		100 MB
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.provenance.repository.rollover.time		30 secs
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.provenance.repository.storage.directory		./target/provenance_repository
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.queue.swap.threshold		20000
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.remote.input.secure		true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.remote.input.socket.port		9990
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.reporting.task.configuration.file		./target/reporting-tasks.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keyPasswd		UM3ntDtCVnR3h9ar||TXZsMG+C77RzmBqv79j40/r3V661zEQHxfTZfAEyT6hrt8dEyg
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keyPasswd.protected		aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keystore		/path/to/keystore.jks
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keystorePasswd		ga/2L8cuwhOa5SMy||4/O1TFulJJTM1LAdoUCvcdEnSpDAFbh3E7hQiJ7uxSNIpUZmp+lOZXAX
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keystorePasswd.protected		aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.keystoreType		JKS
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.truststore		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.truststorePasswd		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.truststoreType		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.security.user.authorizer		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.sensitive.props.additional.keys		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.sensitive.props.algorithm		PBEWITHMD5AND256BITAES-CBC-OPENSSL
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.sensitive.props.key		01yi7aWhIfTVonFH||h16TI4XqrCfP1RIITmuWxRu8yj365tv7GBdJN6LimjwkyWjKt9/ehs3Xs7axhA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.sensitive.props.key.protected		aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.swap.in.period		5 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.swap.in.threads		1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.swap.out.period		5 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.swap.out.threads		4
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.swap.storage.directory		./target/test-repo/swap
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.templates.directory		./target/templates
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.ui.autorefresh.interval		30 sec
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.ui.banner.text		UI Banner Text
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.ui.banner.text.protected		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.http.host		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.http.port		
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.https.host		nifi.nifi.apache.org
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.https.port		8443
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.jetty.working.directory		./target/work/jetty
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - nifi.web.war.directory		./target/lib
]]></system-err>
  </testcase>
  <testcase name="testShouldParseLoginIdentityProvidersArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source login-identity-providers.xml and destination login-identity-providers.xml are identical [src/test/resources/login-identity-providers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed login-identity-providers.xml location: src/test/resources/login-identity-providers.xml
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source login-identity-providers.xml and destination login-identity-providers.xml are identical [src/test/resources/login-identity-providers.xml] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed login-identity-providers.xml location: src/test/resources/login-identity-providers.xml
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationOnFlowXmlWithPreviouslyEncryptedNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.042">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 10 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:nififtw!, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original encrypted values: [nifi.security.keyPasswd:ttiSNTC7PUf2Hla7||W2OmVFn4bfB2ZJNBG55SaLneQeZahhF6GIaLZU+i4zRFfxKnlQ, nifi.security.keystorePasswd:vp9C9a8KbSYZFdUM||RoZHB1J+sRgCKG2vKBviOn71tdhsDYH42No+VmIaFMolrTMD/zmwcKev, nifi.security.truststorePasswd:, nifi.sensitive.props.key:UXcrW8T1UKAPJeun||ezUJSp30AvKGsRxJOOXoPUtZonv56Lx1, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key originally protected with aes/gcm/128
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 10 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Tool is not configured to encrypt nifi.properties, but the existing nifi.properties is encrypted and flow.xml.gz was migrated, so manually persisting the new encrypted value to nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# security properties #
nifi.sensitive.props.key=iF0QAsn03ShBmjcG||jX8HCUmc6i0+bNxGjyRG6/X/ZtUMLqJwXq9POkvZFPy3/w
nifi.sensitive.props.key.protected=aes/gcm/128
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=vp9C9a8KbSYZFdUM||RoZHB1J+sRgCKG2vKBviOn71tdhsDYH42No+VmIaFMolrTMD/zmwcKev
nifi.security.keystorePasswd.protected=aes/gcm/128
nifi.security.keyPasswd=ttiSNTC7PUf2Hla7||W2OmVFn4bfB2ZJNBG55SaLneQeZahhF6GIaLZU+i4zRFfxKnlQ
nifi.security.keyPasswd.protected=aes/gcm/128
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Sensitive property key currently protected with aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA1
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}, enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{6fb41c8fd474d00a9c1526d7e5faba3e32023c8603a67e2e715c657c7302eabd6968f856f0dd57236303f2a731a04522}, enc{400c1d6f4436384f59aae87d4e35be8d7f03aa483dc270add7b9a38f8bc7e4f653f726a408ccb5f6fff7c15ce3158188}]
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptLoginIdentityProvidersWithMultipleElementsPerLine" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.028">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property><property name="TLS - Keystore"></property><property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property><property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testWriteAuthorizersShouldHandleUnreadableFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.054">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">uULnS+FM+hCCTJMq||nBZeRpPjIhhTY2bZcm7TMJLQNe7aoQtN3MYaolP+BGsWbQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">YD0V+kjnCjJYLPF5||x4kKkJel1Bs7fb2kDMIteQDTQVQ3/oStiTiMdeU56Gcm4w</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BNHMqHuaK2168/jd||doDlEvtoNMRS2tCqZcdN/sE8qw0i2RHaQQSwlyzsRA/SzQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">uULnS+FM+hCCTJMq||nBZeRpPjIhhTY2bZcm7TMJLQNe7aoQtN3MYaolP+BGsWbQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">YD0V+kjnCjJYLPF5||x4kKkJel1Bs7fb2kDMIteQDTQVQ3/oStiTiMdeU56Gcm4w</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BNHMqHuaK2168/jd||doDlEvtoNMRS2tCqZcdN/sE8qw0i2RHaQQSwlyzsRA/SzQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Written lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">uULnS+FM+hCCTJMq||nBZeRpPjIhhTY2bZcm7TMJLQNe7aoQtN3MYaolP+BGsWbQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">YD0V+kjnCjJYLPF5||x4kKkJel1Bs7fb2kDMIteQDTQVQ3/oStiTiMdeU56Gcm4w</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BNHMqHuaK2168/jd||doDlEvtoNMRS2tCqZcdN/sE8qw0i2RHaQQSwlyzsRA/SzQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptLoginIdentityProvidersWithEmptySensitiveElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.03">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">sIHTjxSo9aLysFMs||682qtrCCXZNjShaZ8wjbiWlPjYNrLbfegf8UaJbunZWNzw</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password"/>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password"/>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">sIHTjxSo9aLysFMs||682qtrCCXZNjShaZ8wjbiWlPjYNrLbfegf8UaJbunZWNzw</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password"/>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password"/>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: sIHTjxSo9aLysFMs||682qtrCCXZNjShaZ8wjbiWlPjYNrLbfegf8UaJbunZWNzw
]]></system-err>
  </testcase>
  <testcase name="testShouldSerializeNiFiPropertiesAndPreserveFormatWithExistingProtectionSchemes" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.012">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read 30 lines from src/test/resources/nifi_with_few_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0...
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 13 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_few_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded NiFiProperties from src/test/resources/nifi_with_few_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 10 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - There are 9 sensitive properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - There are 3 protected properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Counted 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Expected line count change: 0
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized NiFiProperties to 30 lines
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# security properties #
nifi.sensitive.props.key=n2z+tTTbHuZ4V4V2||uWhdasyDXD4ZG2lMAes/vqh6u4vaz4xgL4aEbF4Y/dXevqk3ulRcOwf1vc4RDQ==
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=oBjT92hIGRElIGOh||MZ6uYuWNBrOA6usq/Jt3DaD2e4otNirZDytac/w/KFe0HOkrJR03vcbo
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=ac/BaE35SL/esLiJ||+ULRvRLYdIDA2VqpE0eQXDEMjaLBMG2kbKOdOwBk/hGebDKlVg==
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptAuthorizersWithMultipleElementsPerLine" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.05">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property><property name="TLS - Keystore"></property><property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property><property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore"/>
    <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
    <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
]]></system-err>
  </testcase>
  <testcase name="testParseShouldWarnIfFlowXmlWillBeOverwritten" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [conf/nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [conf/flow.xml.gz] so the original will be overwritten
]]></system-err>
  </testcase>
  <testcase name="testShouldWriteNiFiPropertiesInSameLocation" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.009">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp_nifi.properties] so the original will be overwritten
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from target/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Wrote to target/tmp_nifi.properties
]]></system-err>
  </testcase>
  <testcase name="testDeriveKeyFromPasswordShouldThrowExceptionForInvalidPasswords" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.006">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading password: [null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot derive key from empty/short password -- password must be at least 12 characters
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading password: []
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot derive key from empty/short password -- password must be at least 12 characters
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading password: [      ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot derive key from empty/short password -- password must be at least 12 characters
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading password: [shortpass]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot derive key from empty/short password -- password must be at least 12 characters
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Reading password: [shortwith    ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Cannot derive key from empty/short password -- password must be at least 12 characters
]]></system-err>
  </testcase>
  <testcase name="testShouldFailOnCliTranslateIfConflictingFlagsPresent" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.068">
    <system-out><![CDATA[When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, '-n'/'--niFiProperties' is required (and '-b'/'--bootstrapConf' is required if the properties are encrypted)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, only '-h', '-v', and '-n'/'-b' with the relevant files are allowed

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, only '-h', '-v', and '-n'/'-b' with the relevant files are allowed

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
When '-c'/'--translateCli' is specified, only '-h', '-v', and '-n'/'-b' with the relevant files are allowed

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-n, nifi.properties, -c]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [--niFiProperties, nifi.properties, -c]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [--verbose, -n, nifi.properties, -b, bootstrap.conf, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-v, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [--verbose, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-b, bootstrap.conf, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [--bootstrapConf, bootstrap.conf, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [--migrate, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-o, output, -c]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Testing with [-x, $s0$, -c]
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFromKeyToPassword" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.495">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key provided directly: 	2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migration key derived from password [drowssaPdaBAsIsiht]: 	7696EBC090B471D068F17CF1E6FA10CD9CBC7300B1F88171E3D597C0472C9747
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Running [key to password] with args: [-n, src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties, -b, target/tmp/tmp_bootstrap.conf, -o, target/tmp/tmp_nifi.properties, -m, -v, -e, 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE, -p, drowssaPdaBAsIsiht]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating key (key to password) with -n src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties -b target/tmp/tmp_bootstrap.conf -o target/tmp/tmp_nifi.properties -m -v -e 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE -p drowssaPdaBAsIsiht
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	KzF7Qdv2QCCRdTMO||YqaPWgNcDMF96MphskOAXxkOnnnPK7jk7EQVS6gz9w55kSa97A
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	Dc7XFE4sqH8ARihM||Q0IFbLvt12XhKraNauUgYAxB5DqnzjKFFfFgV7JSNv/9osp8HeM81CNW
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	uK2dLk+a5BxfI5Vm||YnTa2LNwgQo4pqwF9BCkLyk2NOUlK2aQOsPnN7cRknV1myeQhmMsLf17x1AspQ
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=uK2dLk+a5BxfI5Vm||YnTa2LNwgQo4pqwF9BCkLyk2NOUlK2aQOsPnN7cRknV1myeQhmMsLf17x1AspQ
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=Dc7XFE4sqH8ARihM||Q0IFbLvt12XhKraNauUgYAxB5DqnzjKFFfFgV7JSNv/9osp8HeM81CNW
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=KzF7Qdv2QCCRdTMO||YqaPWgNcDMF96MphskOAXxkOnnnPK7jk7EQVS6gz9w55kSa97A
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=7696EBC090B471D068F17CF1E6FA10CD9CBC7300B1F88171E3D597C0472C9747
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptSensitiveProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.008">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed nifi.properties location: src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	RcEYlVHk8OmU324y||9/kSrczpKZ+hLbqflDDCdpmirwu6pCSOmf1Zmo2ZKriZgw3V5w
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	WBilzWTI4kv2OQmX||tG295LXgLvr/z0GFRq71rXc5aHNQ+UwC4d7m7wo2yYk3UhSK1trL6Ge8
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	Si5Wg/vFn52WfJXf||KlipOVskttXSle6QSySDh/Op8DUsplnoCB0pC3KGrLlkvdVt7fjoY6tEiRR0ig
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted sensitive properties
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptLoginIdentityProvidersWithRenamedProvider" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.026">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">2tNv+ZUokO6A8NyS||F05GMSIiXDpuq4UrDL73IvXQHVFQN3vp6EXj9DNy59iuJA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">KCvrGajXL8rOIc3j||rqnWxoDXz0LXkUXVX0vpS7Dg+uUuDpsx7sYmUIGOiVhvCw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">swt65l0Qva/jKA2S||EArVYTGyxQCeXl5HrKpS2uBxKoK4oVN7r+70iVFldE/i3A</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">2tNv+ZUokO6A8NyS||F05GMSIiXDpuq4UrDL73IvXQHVFQN3vp6EXj9DNy59iuJA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">KCvrGajXL8rOIc3j||rqnWxoDXz0LXkUXVX0vpS7Dg+uUuDpsx7sYmUIGOiVhvCw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">swt65l0Qva/jKA2S||EArVYTGyxQCeXl5HrKpS2uBxKoK4oVN7r+70iVFldE/i3A</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: 2tNv+ZUokO6A8NyS||F05GMSIiXDpuq4UrDL73IvXQHVFQN3vp6EXj9DNy59iuJA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: KCvrGajXL8rOIc3j||rqnWxoDXz0LXkUXVX0vpS7Dg+uUuDpsx7sYmUIGOiVhvCw
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: swt65l0Qva/jKA2S||EArVYTGyxQCeXl5HrKpS2uBxKoK4oVN7r+70iVFldE/i3A
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationForAuthorizers" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.084">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              src/test/resources/authorizers-populated.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              target/tmp/tmp-authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded authorizers content (309 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">zIz5U7gdIO081+kl||RmrUKcT7fV71q+6EOtyoMMtHEFmeHcRBdrzSVYhWz5Dzzw</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">vjhAo3Bwwy0272P3||4ff0JEkTRcrF4rb4dyn+5QqrHwdriGx3mPCwhVc80oqqCg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">iNtAwUoWR/DOJlrs||OtO2gPfdeQnbs0wul2OTvQDwsfivRGTxPLFqNXdV7KdREA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">zIz5U7gdIO081+kl||RmrUKcT7fV71q+6EOtyoMMtHEFmeHcRBdrzSVYhWz5Dzzw</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">vjhAo3Bwwy0272P3||4ff0JEkTRcrF4rb4dyn+5QqrHwdriGx3mPCwhVc80oqqCg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">iNtAwUoWR/DOJlrs||OtO2gPfdeQnbs0wul2OTvQDwsfivRGTxPLFqNXdV7KdREA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationOnFlowXmlWithoutEncryptedNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.038">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:, nifi.security.keystorePasswd:, nifi.security.truststorePasswd:, nifi.sensitive.props.key:, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp-nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of flow.xml.gz
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [target/tmp/tmp-flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Migrating flow.xml file at target/tmp/tmp-flow.xml.gz. This could take a while if the flow XML is very large.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=thisIsABadPassword
nifi.sensitive.props.key.protected=
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=
nifi.security.keystoreType=
nifi.security.keystorePasswd=
nifi.security.keyPasswd=
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 83 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp-nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original flow.xml.gz cipher texts: [enc{7468697349734142616453616c742e2e79ad38319f8069990c6ac60cad75639f9d2ab7dff1a0b8b488af2fff659cf353}, enc{7468697349734142616453616c742e2e63a2cd00e648c459e7e45223fefe8d38ab9ed3d71d94be57d5b0e4391980c858}]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated  flow.xml.gz cipher texts: [enc{60b9cf4e9de3be6820a9b171e63084b0d546ef3c9145ff9022b1107b499a6112dac0c5a8b5012f556351f85f34199f7f}, enc{0367925d906404f58949a839886de5eda0843dbf1e042fce8ccd0b49dd4b65208281bde7d2945004b9acfac206cb6d5e}]
]]></system-err>
  </testcase>
  <testcase name="testEncryptLoginIdentityProvidersShouldHandleCommentedElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.014">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No unencrypted password property elements found in login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldWriteNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.008">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Wrote to target/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=thisIsABadSensitiveKeyPassword
nifi.sensitive.props.key.protected=
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=thisIsABadKeystorePassword
nifi.security.keyPasswd=thisIsABadKeyPassword
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
]]></system-err>
  </testcase>
  <testcase name="testShouldReadPasswordFromConsoleIfNoKeyPresent" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.234">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password flag: true
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Password: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Key hex:  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE]
]]></system-err>
  </testcase>
  <testcase name="testParseShouldFailIfPropertiesAndProvidersMissing" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.094">
    <system-out><![CDATA[One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
Error parsing command line. (Missing argument for option: n)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
Error parsing command line. (Missing argument for option: l)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
Error parsing command line. (Missing argument for option: a)

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
In order to migrate a flow.xml.gz, a nifi.properties file must also be specified via '-n'/'--niFiProperties'.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  target/tmp/tmp-flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
org.apache.commons.cli.MissingArgumentException: Missing argument for option: n
	at org.apache.commons.cli.DefaultParser.checkRequiredArgs(DefaultParser.java:211)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:125)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:76)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:60)
	at org.apache.commons.cli.CommandLineParser$parse.call(Unknown Source)
	at org.apache.nifi.properties.ConfigEncryptionTool.parse(ConfigEncryptionTool.groovy:295)
	at sun.reflect.GeneratedMethodAccessor87.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:167)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:70)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy:423)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:399)
	at groovy.test.GroovyAssert.shouldFail(GroovyAssert.java:95)
	at groovy.util.GroovyTestCase.shouldFail(GroovyTestCase.java:209)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:351)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:64)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:168)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14.doCall(ConfigEncryptionToolTest.groovy:422)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:421)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2330)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2315)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2356)
	at org.codehaus.groovy.runtime.dgm$186.invoke(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:244)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest.testParseShouldFailIfPropertiesAndProvidersMissing(ConfigEncryptionToolTest.groovy:421)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.contrib.java.lang.system.ExpectedSystemExit$1.evaluate(ExpectedSystemExit.java:130)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:43)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:82)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:73)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Error parsing command line. (Missing argument for option: n)
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
org.apache.commons.cli.MissingArgumentException: Missing argument for option: l
	at org.apache.commons.cli.DefaultParser.checkRequiredArgs(DefaultParser.java:211)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:125)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:76)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:60)
	at org.apache.commons.cli.CommandLineParser$parse.call(Unknown Source)
	at org.apache.nifi.properties.ConfigEncryptionTool.parse(ConfigEncryptionTool.groovy:295)
	at sun.reflect.GeneratedMethodAccessor87.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:167)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:70)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy:423)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:399)
	at groovy.test.GroovyAssert.shouldFail(GroovyAssert.java:95)
	at groovy.util.GroovyTestCase.shouldFail(GroovyTestCase.java:209)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:351)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:64)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:168)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14.doCall(ConfigEncryptionToolTest.groovy:422)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:421)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2330)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2315)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2356)
	at org.codehaus.groovy.runtime.dgm$186.invoke(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:244)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest.testParseShouldFailIfPropertiesAndProvidersMissing(ConfigEncryptionToolTest.groovy:421)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.contrib.java.lang.system.ExpectedSystemExit$1.evaluate(ExpectedSystemExit.java:130)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:43)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:82)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:73)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Error parsing command line. (Missing argument for option: l)
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
org.apache.commons.cli.MissingArgumentException: Missing argument for option: a
	at org.apache.commons.cli.DefaultParser.checkRequiredArgs(DefaultParser.java:211)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:125)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:76)
	at org.apache.commons.cli.DefaultParser.parse(DefaultParser.java:60)
	at org.apache.commons.cli.CommandLineParser$parse.call(Unknown Source)
	at org.apache.nifi.properties.ConfigEncryptionTool.parse(ConfigEncryptionTool.groovy:295)
	at sun.reflect.GeneratedMethodAccessor87.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:167)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:70)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy:423)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14$_closure186.doCall(ConfigEncryptionToolTest.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:399)
	at groovy.test.GroovyAssert.shouldFail(GroovyAssert.java:95)
	at groovy.util.GroovyTestCase.shouldFail(GroovyTestCase.java:209)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:351)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:64)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:168)
	at org.apache.nifi.properties.ConfigEncryptionToolTest$_testParseShouldFailIfPropertiesAndProvidersMissing_closure14.doCall(ConfigEncryptionToolTest.groovy:422)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at groovy.lang.Closure.call(Closure.java:405)
	at groovy.lang.Closure.call(Closure.java:421)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2330)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2315)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:2356)
	at org.codehaus.groovy.runtime.dgm$186.invoke(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:244)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
	at org.apache.nifi.properties.ConfigEncryptionToolTest.testParseShouldFailIfPropertiesAndProvidersMissing(ConfigEncryptionToolTest.groovy:421)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.contrib.java.lang.system.ExpectedSystemExit$1.evaluate(ExpectedSystemExit.java:130)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1$1.evaluate(LogPrintStream.java:30)
	at org.junit.contrib.java.lang.system.internal.PrintStreamHandler$3.evaluate(PrintStreamHandler.java:48)
	at org.junit.contrib.java.lang.system.internal.LogPrintStream$1.evaluate(LogPrintStream.java:26)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:43)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:82)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:73)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Error parsing command line. (Missing argument for option: a)
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] One or more of ['-n'/'--niFiProperties', '-l'/'--loginIdentityProviders', '-a'/'--authorizers'] must be provided unless '-x'/--'encryptFlowXmlOnly' is specified
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] In order to migrate a flow.xml.gz, a nifi.properties file must also be specified via '-n'/'--niFiProperties'.
]]></system-err>
  </testcase>
  <testcase name="testShouldSerializeNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.007">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 2 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized NiFiProperties to 3 lines
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 
#Thu May 02 02:36:19 WEST 2024
key=value
key2=value2
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptLoginIdentityProvidersWithMultilineElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.039">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password">
            thisIsABadPassword
        </property>

        <property name="TLS - Keystore"></property>
        <property
                name="TLS - Keystore Password">thisIsABadPassword
        </property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name=
                          "TLS - Truststore Password">
            thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"/>
        <property name="Manager Password" encryption="aes/gcm/256">ObUgOqNGafmDSlH6||5EFHnJDWnrt20sPK0gytImrsV3y/prkhyFHUPHx39c8IFg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">nPssjDsqd2oCJ740||pThKTR5fcDmCOMTEXEj02Gll85fas7eXmg7q0iizy/IDsw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">YfuC2R1doxgG3AIS||hEceO0LrS7RAHzR7PNypWxdUKUyNq0v7LMG7K6tYp6gxYg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"/>
        <property name="Manager Password" encryption="aes/gcm/256">ObUgOqNGafmDSlH6||5EFHnJDWnrt20sPK0gytImrsV3y/prkhyFHUPHx39c8IFg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">nPssjDsqd2oCJ740||pThKTR5fcDmCOMTEXEj02Gll85fas7eXmg7q0iizy/IDsw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">YfuC2R1doxgG3AIS||hEceO0LrS7RAHzR7PNypWxdUKUyNq0v7LMG7K6tYp6gxYg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: ObUgOqNGafmDSlH6||5EFHnJDWnrt20sPK0gytImrsV3y/prkhyFHUPHx39c8IFg
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: nPssjDsqd2oCJ740||pThKTR5fcDmCOMTEXEj02Gll85fas7eXmg7q0iizy/IDsw
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: YfuC2R1doxgG3AIS||hEceO0LrS7RAHzR7PNypWxdUKUyNq0v7LMG7K6tYp6gxYg
]]></system-err>
  </testcase>
  <testcase name="testShouldParseOutputAuthorizersArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output authorizers.xml location: lmx.srezirohtua/secruoser/tset/crs
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed output authorizers.xml location: lmx.srezirohtua/secruoser/tset/crs
]]></system-err>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldHandleManyProviders" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.044">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>

    <!-- This is a dummy provider that should show up unaltered in the output -->
    <provider>
        <identifier>dummy-provider-1</identifier>
        <class>com.example.MyProvider1</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!-- This is a dummy provider that should show up unaltered in the output -->
    <provider>
        <identifier>dummy-provider-2</identifier>
        <class>com.example.MyProvider2</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>

    
    <provider>
        <identifier>dummy-provider-1</identifier>
        <class>com.example.MyProvider1</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">ck7zcvsuf08tYZZN||Js4ZuclOw3tKqqxdvlha2RAogpoUzUhblN+B4wAzWabHhQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">Ei1ZttWDzrIQ/rpD||dMiWVOg4nNYPhai7ZTC/qku3KBzZwJMVkgnJrG1InaomZg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">bwV8lrE4jJQEfK2M||k89OpsGZlF0uTLlIO3ZS7hLIgiGI+FD03KZxJJBFmngyfw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    <provider>
        <identifier>dummy-provider-2</identifier>
        <class>com.example.MyProvider2</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>

    
    <provider>
        <identifier>dummy-provider-1</identifier>
        <class>com.example.MyProvider1</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">ck7zcvsuf08tYZZN||Js4ZuclOw3tKqqxdvlha2RAogpoUzUhblN+B4wAzWabHhQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">Ei1ZttWDzrIQ/rpD||dMiWVOg4nNYPhai7ZTC/qku3KBzZwJMVkgnJrG1InaomZg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">bwV8lrE4jJQEfK2M||k89OpsGZlF0uTLlIO3ZS7hLIgiGI+FD03KZxJJBFmngyfw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    <provider>
        <identifier>dummy-provider-2</identifier>
        <class>com.example.MyProvider2</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>

    <!-- This is a dummy provider that should show up unaltered in the output -->
    <provider>
        <identifier>dummy-provider-1</identifier>
        <class>com.example.MyProvider1</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">ck7zcvsuf08tYZZN||Js4ZuclOw3tKqqxdvlha2RAogpoUzUhblN+B4wAzWabHhQ</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">Ei1ZttWDzrIQ/rpD||dMiWVOg4nNYPhai7ZTC/qku3KBzZwJMVkgnJrG1InaomZg</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">bwV8lrE4jJQEfK2M||k89OpsGZlF0uTLlIO3ZS7hLIgiGI+FD03KZxJJBFmngyfw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!-- This is a dummy provider that should show up unaltered in the output -->
    <provider>
        <identifier>dummy-provider-2</identifier>
        <class>com.example.MyProvider2</class>
        <property name="Property 1">Value 1</property>
        <property name="Property 2">Value 2</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testParseShouldFailOnFlowWithoutNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.01">
    <system-out><![CDATA[In order to migrate a flow.xml.gz, a nifi.properties file must also be specified via '-n'/'--niFiProperties'.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source flow.xml.gz and destination flow.xml.gz are identical [conf/flow.xml.gz] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] In order to migrate a flow.xml.gz, a nifi.properties file must also be specified via '-n'/'--niFiProperties'.
]]></system-err>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldHandleEmptyFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.009">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 

[Fatal Error] :1:1: Premature end of file.
[main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - No provider element with class org.apache.nifi.ldap.LdapProvider found in XML content; the file could be empty or the element may be missing or commented out
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 

]]></system-err>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldRespectComments" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.051">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">p5auIHcHy1Zasxt/||QO8uSfDGqhLGVcG61HmaXGwT5gj9AXYMepNILUc01jzixQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">xrZP2JbcmDLBBAdX||TZs9483swGaC7jj5IfBJQpVy0592LtK1bdI9rZLrb36Sug</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">rN7N3xkUujj7DM1P||83iQNdj8stbwBsWiA56SJYgPitbu1K6J6bzF88Tj5IoWYw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">p5auIHcHy1Zasxt/||QO8uSfDGqhLGVcG61HmaXGwT5gj9AXYMepNILUc01jzixQ</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">xrZP2JbcmDLBBAdX||TZs9483swGaC7jj5IfBJQpVy0592LtK1bdI9rZLrb36Sug</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">rN7N3xkUujj7DM1P||83iQNdj8stbwBsWiA56SJYgPitbu1K6J6bzF88Tj5IoWYw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">p5auIHcHy1Zasxt/||QO8uSfDGqhLGVcG61HmaXGwT5gj9AXYMepNILUc01jzixQ</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">xrZP2JbcmDLBBAdX||TZs9483swGaC7jj5IfBJQpVy0592LtK1bdI9rZLrb36Sug</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">rN7N3xkUujj7DM1P||83iQNdj8stbwBsWiA56SJYgPitbu1K6J6bzF88Tj5IoWYw</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldUpdateBootstrapContentsWithKeyAndComment" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated bootstrap.conf lines: [# Root key in hexadecimal format for encrypted sensitive configuration values, nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
]]></system-err>
  </testcase>
  <testcase name="testShouldReadKeyFromConsole" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.003">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [0123 4567]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [   0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210   ]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [non-hex-chars]
]]></system-err>
  </testcase>
  <testcase name="testDecryptLoginIdentityProvidersShouldHandleCommentedElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.021">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in login-identity-providers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <!-- To enable the ldap-provider remove 2 lines. This is 1 of 2. 
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN"></property>
        <property name="Manager Password"></property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password"></property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password"></property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the ldap-provider remove 2 lines. This is 2 of 2. -->

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldTranslateCliWithEncryptedInput" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.035">
    <system-out><![CDATA[baseUrl=https://nifi.nifi.apache.org:8443
keystore=/path/to/keystore.jks
keystoreType=JKS
keystorePasswd=thisIsABadKeystorePassword
keyPasswd=thisIsABadKeyPassword
truststore=
truststoreType=
truststorePasswd=
proxiedEntity=
Tried to exit with status 0.

usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi_with_sensitive_properties_protected_aes.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - STDOUT:
	baseUrl=https://nifi.nifi.apache.org:8443
	keystore=/path/to/keystore.jks
	keystoreType=JKS
	keystorePasswd=thisIsABadKeystorePassword
	keyPasswd=thisIsABadKeyPassword
	truststore=
	truststoreType=
	truststorePasswd=
	proxiedEntity=
]]></system-err>
  </testcase>
  <testcase name="testShouldDecryptLoginIdentityProvidersWithMultilineElements" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.031">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption=
                "aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property
                name="TLS - Keystore Password"
                encryption="aes/gcm/128">
            Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g
        </property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt 
            Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g
         using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Decrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testWriteLoginIdentityProvidersShouldHandleUnreadableFile" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.037">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Kr5F4/63pNFahOD9||VrF7trC1B1ieyl6v5iOd7AxbaVfMuagUpatswn0QaVPw5A</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">+5q0C0TnyhQbXxEu||FanBNS9ahYJFYXrnkRHwWqYTWoxlHE6VEYKlsrQviDmoZA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">MQmmWIRI4mau/84d||+UuMBN0dD4ms6tYIPD7gSifVeaTpEdZhzYlj72wdl3FVFA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Kr5F4/63pNFahOD9||VrF7trC1B1ieyl6v5iOd7AxbaVfMuagUpatswn0QaVPw5A</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">+5q0C0TnyhQbXxEu||FanBNS9ahYJFYXrnkRHwWqYTWoxlHE6VEYKlsrQviDmoZA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">MQmmWIRI4mau/84d||+UuMBN0dD4ms6tYIPD7gSifVeaTpEdZhzYlj72wdl3FVFA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Written lines: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">Kr5F4/63pNFahOD9||VrF7trC1B1ieyl6v5iOd7AxbaVfMuagUpatswn0QaVPw5A</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">+5q0C0TnyhQbXxEu||FanBNS9ahYJFYXrnkRHwWqYTWoxlHE6VEYKlsrQviDmoZA</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">MQmmWIRI4mau/84d||+UuMBN0dD4ms6tYIPD7gSifVeaTpEdZhzYlj72wdl3FVFA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationMultipleTimes" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.534">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Derived key from password [thisIsABadPassword]: 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main first time with -n src/test/resources/nifi_with_sensitive_properties_unprotected.properties -b target/tmp/tmp_bootstrap.conf -o target/tmp/tmp_nifi.properties -p thisIsABadPassword -v
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	QAAXUeRQTYFrjKUr||3gym2Ek3RH3U2hbmbGCcJw/P2uOFOWki6YpGQbGxpPUb5uH9KA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	XQJu+4zw5cgKWrKB||B84S2iecNOO0W/6nF+sjV8i4KDg2UPCkkth6k5uq05OkdN4MZKv9YsmG
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	iWoFZqF7UH8aagKv||G0HETNRElN5ImxQE+ehpyD8E2L5xb9r7s2EXUsAF06z95ARXPZoVuqV5c73emA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - [EXPECTED] Tried to exit with status 0.
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Invoked #main second time with -n target/tmp/tmp_nifi.properties -b target/tmp/tmp_bootstrap.conf -p thisIsABadPassword -v
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [target/tmp/tmp_nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.ui.banner.text with aes/gcm/256 -> 	495mMjecqeJlGgU4||AFOsb7mXNJpuFDPY8nqaH2zkoYvc3DGeSy+wSl6+
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.ui.banner.text.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	W36AR/YEIZtaDl3+||pyBr2ckufiPd5I1fInS+xE7ri2XmnG4JVbzRKduDhVn/gW+kWw
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	LeXBwQMcmtMUeVO7||+Dt6sUS7ZwysucMPCAo4gJlGwakCwrXb+PH+2Atq5wjxpJ9/GzRAJNpX
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	BjJrwOKWQtAvhFqc||NBm6yhA4c03O3szGkt506zLUXKpxrvX0YAe8F8Lumcjf3f1RVeH95lYLscaPGA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 86 keys including 4 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=495mMjecqeJlGgU4||AFOsb7mXNJpuFDPY8nqaH2zkoYvc3DGeSy+wSl6+
nifi.ui.banner.text.protected=aes/gcm/256
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=BjJrwOKWQtAvhFqc||NBm6yhA4c03O3szGkt506zLUXKpxrvX0YAe8F8Lumcjf3f1RVeH95lYLscaPGA
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=nifi.ui.banner.text

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=LeXBwQMcmtMUeVO7||+Dt6sUS7ZwysucMPCAo4gJlGwakCwrXb+PH+2Atq5wjxpJ9/GzRAJNpX
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=W36AR/YEIZtaDl3+||pyBr2ckufiPd5I1fInS+xE7ri2XmnG4JVbzRKduDhVn/gW+kWw
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 86 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
]]></system-err>
  </testcase>
  <testcase name="testShouldPrintHelpMessage" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.012">
    <system-out><![CDATA[usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties.  Valid values are: [AES_GCM, AWS_SECRETSMANAGER, AWS_KMS,
                                               AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV, HASHICORP_VAULT_TRANSIT] (default is
                                               AES_GCM)
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: null
NiFi Toolkit home: null
]]></system-out>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldHandleRenamedProvider" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.048">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter"></property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">GhHWDOFCVlE8a1aS||domkjhe6QcQBobK+iu8XLcnqSwzjmwIB+P66fQCqBZkqsg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">1KgDDmadq8ymz93X||9rJmMiEG/Mf7922H/aDVAPLtWU3YUXRy7QD5lnnYGcS16Q</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">svwKN1YuO6t9Ejjg||xmsZVCVp8qY8VpW8Zf70x0/W+AjdCi8BNEmlgDKC/ROFpg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted XML: 
<?xml version="1.0" encoding="UTF-8"?><loginIdentityProviders>
    
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">GhHWDOFCVlE8a1aS||domkjhe6QcQBobK+iu8XLcnqSwzjmwIB+P66fQCqBZkqsg</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">1KgDDmadq8ymz93X||9rJmMiEG/Mf7922H/aDVAPLtWU3YUXRy7QD5lnnYGcS16Q</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">svwKN1YuO6t9Ejjg||xmsZVCVp8qY8VpW8Zf70x0/W+AjdCi8BNEmlgDKC/ROFpg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    
    
</loginIdentityProviders>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>definitely-not-dap-lay-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">GhHWDOFCVlE8a1aS||domkjhe6QcQBobK+iu8XLcnqSwzjmwIB+P66fQCqBZkqsg</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">1KgDDmadq8ymz93X||9rJmMiEG/Mf7922H/aDVAPLtWU3YUXRy7QD5lnnYGcS16Q</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">svwKN1YuO6t9Ejjg||xmsZVCVp8qY8VpW8Zf70x0/W+AjdCi8BNEmlgDKC/ROFpg</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter"/>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldWriteKeyToBootstrapConf" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.005">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldParseBootstrapConfArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed bootstrap.conf location: src/test/resources/bootstrap.conf
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed bootstrap.conf location: src/test/resources/bootstrap.conf
]]></system-err>
  </testcase>
  <testcase name="testShouldReadKeyFromConsoleIfFlagProvided" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Using password flag: false
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Password: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Key hex:  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read key: [0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFromPasswordToKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.643">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key derived from password [thisIsABadPassword]: 	2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migration key provided directly: 	0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Running [password to key] with args: [-n, src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties, -b, target/tmp/tmp_bootstrap.conf, -o, target/tmp/tmp_nifi.properties, -m, -v, -w, thisIsABadPassword, -k, 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating key (password to key) with -n src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties -b target/tmp/tmp_bootstrap.conf -o target/tmp/tmp_nifi.properties -m -v -w thisIsABadPassword -k 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  conf/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	1GKUNFtKxl0gUJ9M||rGSNLo6CqrAznuUkZhocNM9PvSRJuznQ9n7sGCOdFjmIRzWZRg
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	xkYw0Vhre3Mu7wkH||0D18/NldnBSPm4hyjk2ft6XGZg98YxGH2366BSjJZ02xTC85JA5ahEuE
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	qU2w1q2jplOvpuco||E6jP3pyh6BKR3DVkInrwaqKnp7+T13ZX0n4BfJFYqd5gPLti2TZpLCf2pOy9Sw
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=qU2w1q2jplOvpuco||E6jP3pyh6BKR3DVkInrwaqKnp7+T13ZX0n4BfJFYqd5gPLti2TZpLCf2pOy9Sw
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=xkYw0Vhre3Mu7wkH||0D18/NldnBSPm4hyjk2ft6XGZg98YxGH2366BSjJZ02xTC85JA5ahEuE
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=1GKUNFtKxl0gUJ9M||rGSNLo6CqrAznuUkZhocNM9PvSRJuznQ9n7sGCOdFjmIRzWZRg
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldLoadNiFiProperties" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi_with_sensitive_properties_unprotected.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed nifi.properties location: src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded NiFiProperties from src/test/resources/nifi_with_sensitive_properties_unprotected.properties
]]></system-err>
  </testcase>
  <testcase name="testFindFieldsInStream" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Found 2 fields in src/test/resources/flow.xml.gz that matched enc\{[a-fA-F0-9]+?\}
]]></system-err>
  </testcase>
  <testcase name="testShouldParseKeyArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key: 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed key: 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldParseNiFiPropertiesArgument" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed nifi.properties location: src/test/resources/nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [src/test/resources/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Parsed nifi.properties location: src/test/resources/nifi.properties
]]></system-err>
  </testcase>
  <testcase name="testShouldMigrateFromKeyToKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.024">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key provided directly: 	2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migration key provided directly: 	0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Running [key to key] with args: [-n, src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties, -b, target/tmp/tmp_bootstrap.conf, -o, target/tmp/tmp_nifi.properties, -m, -v, -e, 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE, -k, 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Migrating key (key to key) with -n src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties -b target/tmp/tmp_bootstrap.conf -o target/tmp/tmp_nifi.properties -m -v -e 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE -k 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  src/test/resources/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_protected_aes_password.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	MWtwaAQs2xxbYXjB||0ZASmvbEInyt9bAME4FMw7Vkk7OE2fMCaJb12qr6cwljYA10rA
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	RsFGL4ori1NaCzHx||0iLQg4u2kJZpK8zYLAWpPFM7gJxp3VMZ+NjtWLpSY/0x9SYlT6t67uQg
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	8OWSHffZr6exYf29||0XZVfr5AMQ/Q3F+WCIOsPj37FcqFhWP7o0WHJKyktAFIrQ0yLVHGoiVWVqdO/w
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=8OWSHffZr6exYf29||0XZVfr5AMQ/Q3F+WCIOsPj37FcqFhWP7o0WHJKyktAFIrQ0yLVHGoiVWVqdO/w
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=RsFGL4ori1NaCzHx||0iLQg4u2kJZpK8zYLAWpPFM7gJxp3VMZ+NjtWLpSY/0x9SYlT6t67uQg
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=MWtwaAQs2xxbYXjB||0ZASmvbEInyt9bAME4FMw7Vkk7OE2fMCaJb12qr6cwljYA10rA
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationWithPassword" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.254">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Derived key from password [thisIsABadPassword]: 2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Loaded 82 properties from input file
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original sensitive values: [nifi.security.keyPasswd:thisIsABadKeyPassword, nifi.security.keystorePasswd:thisIsABadKeystorePassword, nifi.security.truststorePasswd:, nifi.sensitive.props.key:thisIsABadSensitiveKeyPassword, nifi.provenance.repository.encryption.key:null, nifi.provenance.repository.encryption.key.provider.password:null, nifi.flowfile.repository.encryption.key.provider.password:null, nifi.content.repository.encryption.key.provider.password:null, nifi.repository.encryption.key.provider.keystore.password:null]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 82 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/src/test/resources/nifi_with_sensitive_properties_unprotected.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded NiFiProperties instance with 82 properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keyPasswd with aes/gcm/256 -> 	9fDZKb2VyeYlrIU6||/3hsGJdF6SekDpTVT+QU3pe4Jw+pVkb//GMF1MDUFaWPwycJ6w
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keyPasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.security.keystorePasswd with aes/gcm/256 -> 	HlRUcg04n95jaF+n||qmVPcNh+tJOjYfKtcS1JvduUIhRwjcUurFz+gilOym894NFhUDuvozFp
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.security.keystorePasswd.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Protected nifi.sensitive.props.key with aes/gcm/256 -> 	djVqUz5g4wmhel4V||VAGC1nBt0vGBRlWqCEwqyBOFIICcCsfMmLONAopffOhNhpJQ0xUA5JwHAYoCSg
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated protection key nifi.sensitive.props.key.protected
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Final result: 85 keys including 3 protected keys
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated nifi.properties:
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - 

# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Core Properties #
nifi.flow.configuration.file=./target/flow.xml.gz
nifi.flow.configuration.archive.dir=./target/archive/
nifi.flowcontroller.autoResumeState=true
nifi.flowcontroller.graceful.shutdown.period=10 sec
nifi.flowservice.writedelay.interval=2 sec
nifi.administrative.yield.duration=30 sec

nifi.reporting.task.configuration.file=./target/reporting-tasks.xml
nifi.controller.service.configuration.file=./target/controller-services.xml
nifi.templates.directory=./target/templates
nifi.ui.banner.text=UI Banner Text
nifi.ui.autorefresh.interval=30 sec
nifi.nar.library.directory=./target/resources/NiFiProperties/lib/
nifi.nar.library.directory.alt=./target/resources/NiFiProperties/lib2/
nifi.nar.working.directory=./target/work/nar/

# H2 Settings
nifi.database.directory=./target/database_repository
nifi.h2.url.append=;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE

# FlowFile Repository
nifi.flowfile.repository.directory=./target/test-repo
nifi.flowfile.repository.partitions=1
nifi.flowfile.repository.checkpoint.interval=2 mins
nifi.queue.swap.threshold=20000
nifi.swap.storage.directory=./target/test-repo/swap
nifi.swap.in.period=5 sec
nifi.swap.in.threads=1
nifi.swap.out.period=5 sec
nifi.swap.out.threads=4

# Content Repository
nifi.content.claim.max.appendable.size=10 MB
nifi.content.claim.max.flow.files=100
nifi.content.repository.directory.default=./target/content_repository

# Provenance Repository Properties
nifi.provenance.repository.storage.directory=./target/provenance_repository
nifi.provenance.repository.max.storage.time=24 hours
nifi.provenance.repository.max.storage.size=1 GB
nifi.provenance.repository.rollover.time=30 secs
nifi.provenance.repository.rollover.size=100 MB

# Site to Site properties
nifi.remote.input.socket.port=9990
nifi.remote.input.secure=true

# web properties #
nifi.web.war.directory=./target/lib
nifi.web.http.host=
nifi.web.http.port=
nifi.web.https.host=nifi.nifi.apache.org
nifi.web.https.port=8443
nifi.web.jetty.working.directory=./target/work/jetty

# security properties #
nifi.sensitive.props.key=djVqUz5g4wmhel4V||VAGC1nBt0vGBRlWqCEwqyBOFIICcCsfMmLONAopffOhNhpJQ0xUA5JwHAYoCSg
nifi.sensitive.props.key.protected=aes/gcm/256
nifi.sensitive.props.algorithm=PBEWITHMD5AND256BITAES-CBC-OPENSSL
nifi.sensitive.props.additional.keys=

nifi.security.keystore=/path/to/keystore.jks
nifi.security.keystoreType=JKS
nifi.security.keystorePasswd=HlRUcg04n95jaF+n||qmVPcNh+tJOjYfKtcS1JvduUIhRwjcUurFz+gilOym894NFhUDuvozFp
nifi.security.keystorePasswd.protected=aes/gcm/256
nifi.security.keyPasswd=9fDZKb2VyeYlrIU6||/3hsGJdF6SekDpTVT+QU3pe4Jw+pVkb//GMF1MDUFaWPwycJ6w
nifi.security.keyPasswd.protected=aes/gcm/256
nifi.security.truststore=
nifi.security.truststoreType=
nifi.security.truststorePasswd=
nifi.security.user.authorizer=

# cluster common properties (cluster manager and nodes must have same values) #
nifi.cluster.protocol.heartbeat.interval=5 sec
nifi.cluster.protocol.is.secure=false
nifi.cluster.protocol.socket.timeout=30 sec
nifi.cluster.protocol.connection.handshake.timeout=45 sec
# if multicast is used, then nifi.cluster.protocol.multicast.xxx properties must be configured #
nifi.cluster.protocol.use.multicast=false
nifi.cluster.protocol.multicast.address=
nifi.cluster.protocol.multicast.port=
nifi.cluster.protocol.multicast.service.broadcast.delay=500 ms
nifi.cluster.protocol.multicast.service.locator.attempts=3
nifi.cluster.protocol.multicast.service.locator.attempts.delay=1 sec

# cluster node properties (only configure for cluster nodes) #
nifi.cluster.is.node=false
nifi.cluster.node.address=
nifi.cluster.node.protocol.port=
nifi.cluster.node.protocol.threads=2
# if multicast is not used, nifi.cluster.node.unicast.xxx must have same values as nifi.cluster.manager.xxx #
nifi.cluster.node.unicast.manager.address=
nifi.cluster.node.unicast.manager.protocol.port=
nifi.cluster.node.unicast.manager.authority.provider.port=

# cluster manager properties (only configure for cluster manager) #
nifi.cluster.is.manager=false
nifi.cluster.manager.address=
nifi.cluster.manager.protocol.port=
nifi.cluster.manager.authority.provider.port=
nifi.cluster.manager.authority.provider.threads=10
nifi.cluster.manager.node.firewall.file=
nifi.cluster.manager.node.event.history.size=10
nifi.cluster.manager.node.api.connection.timeout=30 sec
nifi.cluster.manager.node.api.read.timeout=30 sec
nifi.cluster.manager.node.api.request.threads=10
nifi.cluster.manager.flow.retrieval.delay=5 sec
nifi.cluster.manager.protocol.threads=10
nifi.cluster.manager.safemode.duration=0 sec
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loaded 85 properties from /home/alex/Repositories/nifi/nifi-toolkit/nifi-toolkit-encrypt-config/target/tmp/tmp_nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationForAuthorizersWithComplexUserSearchFilter" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.135">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              src/test/resources/authorizers-populated-complex-filter.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              target/tmp/tmp-authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  src/test/resources/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded authorizers content (309 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - No encrypted password property elements found in authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">IB6Q/KSyOPR8FXrB||mQ/jHLubwoGw5IrwdVvj73lkecnfEGo4fl+ACmDQfGIqvw</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">2lWHAwUxkyhMbmSz||y0LfPXms6SHpbJ9/V8v/RxA8q3ZquOPbm3OI9FEyHCk1lw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">BqKFYNxwniMw8dpi||/eAcnplBQOHZE34fkT9qd5uSI/ci+HaZ22Zfh6KDuE6ryQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">IB6Q/KSyOPR8FXrB||mQ/jHLubwoGw5IrwdVvj73lkecnfEGo4fl+ACmDQfGIqvw</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">2lWHAwUxkyhMbmSz||y0LfPXms6SHpbJ9/V8v/RxA8q3ZquOPbm3OI9FEyHCk1lw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">BqKFYNxwniMw8dpi||/eAcnplBQOHZE34fkT9qd5uSI/ci+HaZ22Zfh6KDuE6ryQ</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
]]></system-err>
  </testcase>
  <testcase name="testSerializeLoginIdentityProvidersAndPreserveFormatShouldHandleComplexProperty" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.057">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="User Search Base"></property>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>

    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Serialized lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the login identity providers to use when running securely. In order
    to use a specific provider it must be configured here and it's identifier
    must be specified in the nifi.properties file.
-->
<loginIdentityProviders>
    <!--
        Identity Provider for users logging in with username/password against an LDAP server.
        
        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, or START_TLS.
        
        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.
            
        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully 
            before the target context is closed. Defaults to false.
            
        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).
       
        'Url' - Url of the LDAP servier (i.e. ldap://<hostname>:<port>).
        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).
        'User Search Filter' - Filter for searching for users against the 'User Search Base'.
            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.
            
        'Authentication Expiration' - The duration of how long the user authentication is valid
            for. If the user never logs out, they will be required to log back in following
            this duration.
    -->
    <provider>
        <identifier>ldap-provider</identifier>
        <class>org.apache.nifi.ldap.LdapProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>
        
        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="User Search Base"/>
        <property name="User Search Filter">(&amp; (objectCategory=Person)(sAMAccountName=*)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))(!(sAMAccountName=$*)))</property>

        <property name="Authentication Expiration">12 hours</property>
    </provider>


    <!--
        Identity Provider for users logging in with username/password against a Kerberos KDC server.

        'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).
        'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.
    -->
    <!-- To enable the kerberos-provider remove 2 lines. This is 1 of 2.
    <provider>
        <identifier>kerberos-provider</identifier>
        <class>org.apache.nifi.kerberos.KerberosProvider</class>
        <property name="Default Realm">NIFI.APACHE.ORG</property>
        <property name="Authentication Expiration">12 hours</property>
    </provider>
    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->
</loginIdentityProviders>
]]></system-err>
  </testcase>
  <testcase name="testShouldUpdateBootstrapContentsWithKey" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.002">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated bootstrap.conf lines: [# Root key in hexadecimal format for encrypted sensitive configuration values, nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210]
]]></system-err>
  </testcase>
  <testcase name="testShouldPerformFullOperationMigratingAuthorizers" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.108">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original key line from bootstrap.conf: nifi.bootstrap.sensitive.key=0123456789ABCDEFFEDCBA9876543210
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Original XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/128">q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password" encryption="aes/gcm/128">Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               target/tmp/tmp_bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              src/test/resources/authorizers-populated-encrypted.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              target/tmp/tmp-authorizers.xml
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  src/test/resources/flow.xml.gz
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Key migration mode activated
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Loaded authorizers content (309 lines)
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt q4r7WIgN0MaxdAKM||SGgdCTPGSFEcuH4RraMYEdeyVbOx93abdWTVSWvh1w+klA using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to decrypt Uah59TWX+Ru5GY5p||B44RT/LJtC08QWA5ehQf01JxIpf0qSJUzug25UwkF5a50g using protection scheme aes/gcm/128
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="none">thisIsABadPassword</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="none">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">MY3KZoYzhE9XWpNc||nN0hJhBvwjLdVQzVaU90XaLXtGHZFi8GOYCQZa+VgvKbUA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">5OQuVMqzfHym7046||GfNg3ses02IDEgkVQ5Ct2Zc7LY4CetaMvwmOPl9NMrqVEw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">LnHtEdXx63F9qYEn||zsGQI1jFJZVTKi8D8SPeFGBaD+HfS1ZD65bx29UxvGOuqA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated XML content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property encryption="aes/gcm/256" name="Manager Password">MY3KZoYzhE9XWpNc||nN0hJhBvwjLdVQzVaU90XaLXtGHZFi8GOYCQZa+VgvKbUA</property>

        <property name="TLS - Keystore"/>
        <property encryption="aes/gcm/256" name="TLS - Keystore Password">5OQuVMqzfHym7046||GfNg3ses02IDEgkVQ5Ct2Zc7LY4CetaMvwmOPl9NMrqVEw</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property encryption="aes/gcm/256" name="TLS - Truststore Password">LnHtEdXx63F9qYEn||zsGQI1jFJZVTKi8D8SPeFGBaD+HfS1ZD65bx29UxvGOuqA</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>


    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Updated key line: nifi.bootstrap.sensitive.key=2C576A9585DB862F5ECBEE5B4FFFCCA14B18D8365968D7081651006507AD2BDE
]]></system-err>
  </testcase>
  <testcase name="testParseShouldWarnIfAuthorizersWillBeOverwritten" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.001">
    <system-err><![CDATA[[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source authorizers.xml and destination authorizers.xml are identical [conf/authorizers.xml] so the original will be overwritten
]]></system-err>
  </testcase>
  <testcase name="testShouldEncryptAuthorizers" classname="org.apache.nifi.properties.ConfigEncryptionToolTest" time="0.057">
    <system-err><![CDATA[[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Read lines: 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!--
    This file lists the userGroupProviders, accessPolicyProviders, and authorizers to use when running securely. In order
    to use a specific authorizer it must be configured here and it's identifier must be specified in the nifi.properties file.
    If the authorizer is a managedAuthorizer, it may need to be configured with an accessPolicyProvider and an userGroupProvider.
    This file allows for configuration of them, but they must be configured in order:

    ...
    all userGroupProviders
    all accessPolicyProviders
    all Authorizers
    ...
-->
<authorizers>

    <!--
        The FileUserGroupProvider will provide support for managing users and groups which is backed by a file
        on the local file system.

        - Users File - The file where the FileUserGroupProvider will store users and groups.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            be used to load the users and groups into the Users File.

        - Initial User Identity [unique key] - The identity of a users and systems to seed the Users File. The name of
            each property must be unique, for example: "Initial User Identity A", "Initial User Identity B",
            "Initial User Identity C" or "Initial User Identity 1", "Initial User Identity 2", "Initial User Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!--
    <userGroupProvider>
        <identifier>file-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.FileUserGroupProvider</class>
        <property name="Users File">./conf/users.xml</property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Initial User Identity 1"></property>
    </userGroupProvider>
    -->

    <!--
        The LdapUserGroupProvider will retrieve users and groups from an LDAP server. The users and groups
        are not configurable.

        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible
            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.

        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.
        'Manager Password' - The password of the manager that is used to bind to the LDAP server to
            search for users.

        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP
            using LDAPS or START_TLS.
        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.
        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to
            LDAP using LDAPS or START_TLS.
        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using
            LDAPS or START_TLS (i.e. JKS or PKCS12).
        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.
            Possible values are REQUIRED, WANT, NONE.
        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,
            TLSv1.1, TLSv1.2, etc).
        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully
            before the target context is closed. Defaults to false.

        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.
        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).
        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).

        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).
        'Page Size' - Sets the page size when retrieving users and groups. If not specified, no paging is performed.
        'Sync Interval' - Duration of time between syncing users and groups (i.e. 30 mins). Minimum allowable value is 10 secs.

        'User Search Base' - Base DN for searching for users (i.e. ou=users,o=nifi). Required to search users.
        'User Object Class' - Object class for identifying users (i.e. person). Required if searching users.
        'User Search Scope' - Search scope for searching users (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching users.
        'User Search Filter' - Filter for searching for users against the 'User Search Base' (i.e. (memberof=cn=team1,ou=groups,o=nifi) ). Optional.
        'User Identity Attribute' - Attribute to use to extract user identity (i.e. cn). Optional. If not set, the entire DN is used.
        'User Group Name Attribute' - Attribute to use to define group membership (i.e. memberof). Optional. If not set
            group membership will not be calculated through the users. Will rely on group membership being defined
            through 'Group Member Attribute' if set. The value of this property is the name of the attribute in the user ldap entry that
            associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected
            is configured in the 'User Group Name Attribute - Referenced Group Attribute'.
        'User Group Name Attribute - Referenced Group Attribute' - If blank, the value of the attribute defined in 'User Group Name Attribute'
            is expected to be the full dn of the group. If not blank, this property will define the attribute of the group ldap entry that
            the value of the attribute defined in 'User Group Name Attribute' is referencing (i.e. name). Use of this property requires that
            'Group Search Base' is also configured.

        'Group Search Base' - Base DN for searching for groups (i.e. ou=groups,o=nifi). Required to search groups.
        'Group Object Class' - Object class for identifying groups (i.e. groupOfNames). Required if searching groups.
        'Group Search Scope' - Search scope for searching groups (ONE_LEVEL, OBJECT, or SUBTREE). Required if searching groups.
        'Group Search Filter' - Filter for searching for groups against the 'Group Search Base'. Optional.
        'Group Name Attribute' - Attribute to use to extract group name (i.e. cn). Optional. If not set, the entire DN is used.
        'Group Member Attribute' - Attribute to use to define group membership (i.e. member). Optional. If not set
            group membership will not be calculated through the groups. Will rely on group membership being defined
            through 'User Group Name Attribute' if set. The value of this property is the name of the attribute in the group ldap entry that
            associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected
            is configured in the 'Group Member Attribute - Referenced User Attribute'. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)
        'Group Member Attribute - Referenced User Attribute' - If blank, the value of the attribute defined in 'Group Member Attribute'
            is expected to be the full dn of the user. If not blank, this property will define the attribute of the user ldap entry that
            the value of the attribute defined in 'Group Member Attribute' is referencing (i.e. uid). Use of this property requires that
            'User Search Base' is also configured. (i.e. member: cn=User 1,ou=users,o=nifi vs. memberUid: user1)

        NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the user identities.
            Group names are not mapped.
    -->
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password">thisIsABadPassword</property>

        <property name="TLS - Keystore"></property>
        <property name="TLS - Keystore Password">thisIsABadPassword</property>
        <property name="TLS - Keystore Type"></property>
        <property name="TLS - Truststore"></property>
        <property name="TLS - Truststore Password">thisIsABadPassword</property>
        <property name="TLS - Truststore Type"></property>
        <property name="TLS - Client Auth"></property>
        <property name="TLS - Protocol"></property>
        <property name="TLS - Shutdown Gracefully"></property>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"></property>
        <property name="Page Size"></property>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"></property>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"></property>
        <property name="User Identity Attribute"></property>
        <property name="User Group Name Attribute"></property>
        <property name="User Group Name Attribute - Referenced Group Attribute"></property>

        <property name="Group Search Base"></property>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"></property>
        <property name="Group Name Attribute"></property>
        <property name="Group Member Attribute"></property>
        <property name="Group Member Attribute - Referenced User Attribute"></property>
    </userGroupProvider>

    <!--
        The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeUserGroupProvider</class>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources.
        Additionally, a single configurable user group provider is required. Users from the configurable user group provider
        are configurable, however users loaded from one of the User Group Provider [unique key] will not be.

        - Configurable User Group Provider - A configurable user group provider.

        - User Group Provider [unique key] - The identifier of user group providers to load from. The name of
            each property must be unique, for example: "User Group Provider A", "User Group Provider B",
            "User Group Provider C" or "User Group Provider 1", "User Group Provider 2", "User Group Provider 3"

            NOTE: Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior
            would need to be applied by the base implementation.
    -->
    <!-- To enable the composite-configurable-user-group-provider remove 2 lines. This is 1 of 2.
    <userGroupProvider>
        <identifier>composite-configurable-user-group-provider</identifier>
        <class>org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider</class>
        <property name="Configurable User Group Provider">file-user-group-provider</property>
        <property name="User Group Provider 1"></property>
    </userGroupProvider>
    To enable the composite-configurable-user-group-provider remove 2 lines. This is 2 of 2. -->

    <!--
        The FileAccessPolicyProvider will provide support for managing access policies which is backed by a file
        on the local file system.

        - User Group Provider - The identifier for an User Group Provider defined above that will be used to access
            users and groups for use in the managed access policies.

        - Authorizations File - The file where the FileAccessPolicyProvider will store policies.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity. This identity must be found in the configured User Group Provider.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

            NOTE: Any users in the legacy users file must be found in the configured User Group Provider.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found
            in the configured User Group Provider.
    -->
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </accessPolicyProvider>

    <!--
        The StandardManagedAuthorizer. This authorizer implementation must be configured with the
        Access Policy Provider which it will use to access and manage users, groups, and policies.
        These users, groups, and policies will be used to make all access decisions during authorization
        requests.

        - Access Policy Provider - The identifier for an Access Policy Provider defined above.
    -->
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    <!--
        NOTE: This Authorizer has been replaced with the more granular approach configured above with the Standard
        Managed Authorizer. However, it is still available for backwards compatibility reasons.

        The FileAuthorizer is NiFi's provided authorizer and has the following properties:

        - Authorizations File - The file where the FileAuthorizer will store policies.

        - Users File - The file where the FileAuthorizer will store users and groups.

        - Initial Admin Identity - The identity of an initial admin user that will be granted access to the UI and
            given the ability to create additional users, groups, and policies. The value of this property could be
            a DN when using certificates or LDAP, or a Kerberos principal. This property will only be used when there
            are no other users, groups, and policies defined. If this property is specified then a Legacy Authorized
            Users File can not be specified.

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity,
            so the value should be the unmapped identity.

        - Legacy Authorized Users File - The full path to an existing authorized-users.xml that will be automatically
            converted to the new authorizations model. If this property is specified then an Initial Admin Identity can
            not be specified, and this property will only be used when there are no other users, groups, and policies defined.

        - Node Identity [unique key] - The identity of a NiFi cluster node. When clustered, a property for each node
            should be defined, so that every node knows about every other node. If not clustered these properties can be ignored.
            The name of each property must be unique, for example for a three node cluster:
            "Node Identity A", "Node Identity B", "Node Identity C" or "Node Identity 1", "Node Identity 2", "Node Identity 3"

            NOTE: Any identity mapping rules specified in nifi.properties will also be applied to the node identities,
            so the values should be the unmapped identities (i.e. full DN from a certificate).
    -->
    <!-- <authorizer>
        <identifier>file-provider</identifier>
        <class>org.apache.nifi.authorization.FileAuthorizer</class>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Users File">./conf/users.xml</property>
        <property name="Initial Admin Identity"></property>
        <property name="Legacy Authorized Users File"></property>

        <property name="Node Identity 1"></property>
    </authorizer>
    -->
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - Could not load default bootstrap.conf: Configuration Directory [conf] not found for Bootstrap Properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Attempting to encrypt property using protection scheme aes/gcm/256
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Updated XML content: <?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">O0wuf38is0Z9y7zr||qSAEIl+lUECdcf+BHJeX4I3QGEES33ugOZEpZU/oofotbA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">kHQ9aRkkpKIpjS6F||ebCqU5ULrpHmgLiVzBkFACq1DobC/uYcUmVDtnDkOj2TmQ</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">G9Fgd/ILalzN9VmS||FTgJKRRFBLyc8VuItGiPHyzmk8IexNmQe/wuJhfR+IJgww</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>

[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Encrypted lines: 
<?xml version="1.0" encoding="UTF-8"?><authorizers>

    
    

    
    <userGroupProvider>
        <identifier>ldap-user-group-provider</identifier>
        <class>org.apache.nifi.ldap.tenants.LdapUserGroupProvider</class>
        <property name="Authentication Strategy">START_TLS</property>

        <property name="Manager DN">someuser</property>
        <property name="Manager Password" encryption="aes/gcm/256">O0wuf38is0Z9y7zr||qSAEIl+lUECdcf+BHJeX4I3QGEES33ugOZEpZU/oofotbA</property>

        <property name="TLS - Keystore"/>
        <property name="TLS - Keystore Password" encryption="aes/gcm/256">kHQ9aRkkpKIpjS6F||ebCqU5ULrpHmgLiVzBkFACq1DobC/uYcUmVDtnDkOj2TmQ</property>
        <property name="TLS - Keystore Type"/>
        <property name="TLS - Truststore"/>
        <property name="TLS - Truststore Password" encryption="aes/gcm/256">G9Fgd/ILalzN9VmS||FTgJKRRFBLyc8VuItGiPHyzmk8IexNmQe/wuJhfR+IJgww</property>
        <property name="TLS - Truststore Type"/>
        <property name="TLS - Client Auth"/>
        <property name="TLS - Protocol"/>
        <property name="TLS - Shutdown Gracefully"/>

        <property name="Referral Strategy">FOLLOW</property>
        <property name="Connect Timeout">10 secs</property>
        <property name="Read Timeout">10 secs</property>

        <property name="Url"/>
        <property name="Page Size"/>
        <property name="Sync Interval">30 mins</property>

        <property name="User Search Base"/>
        <property name="User Object Class">person</property>
        <property name="User Search Scope">ONE_LEVEL</property>
        <property name="User Search Filter"/>
        <property name="User Identity Attribute"/>
        <property name="User Group Name Attribute"/>
        <property name="User Group Name Attribute - Referenced Group Attribute"/>

        <property name="Group Search Base"/>
        <property name="Group Object Class">group</property>
        <property name="Group Search Scope">ONE_LEVEL</property>
        <property name="Group Search Filter"/>
        <property name="Group Name Attribute"/>
        <property name="Group Member Attribute"/>
        <property name="Group Member Attribute - Referenced User Attribute"/>
    </userGroupProvider>

    
    

    
    

    
    <accessPolicyProvider>
        <identifier>file-access-policy-provider</identifier>
        <class>org.apache.nifi.authorization.FileAccessPolicyProvider</class>
        <property name="User Group Provider">ldap-user-group-provider</property>
        <property name="Authorizations File">./conf/authorizations.xml</property>
        <property name="Initial Admin Identity"/>
        <property name="Legacy Authorized Users File"/>

        <property name="Node Identity 1"/>
    </accessPolicyProvider>

    
    <authorizer>
        <identifier>managed-authorizer</identifier>
        <class>org.apache.nifi.authorization.StandardManagedAuthorizer</class>
        <property name="Access Policy Provider">file-access-policy-provider</property>
    </authorizer>

    
    
</authorizers>
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: O0wuf38is0Z9y7zr||qSAEIl+lUECdcf+BHJeX4I3QGEES33ugOZEpZU/oofotbA
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: kHQ9aRkkpKIpjS6F||ebCqU5ULrpHmgLiVzBkFACq1DobC/uYcUmVDtnDkOj2TmQ
[main] INFO org.apache.nifi.properties.ConfigEncryptionToolTest - Cipher text: G9Fgd/ILalzN9VmS||FTgJKRRFBLyc8VuItGiPHyzmk8IexNmQe/wuJhfR+IJgww
]]></system-err>
  </testcase>
</testsuite>